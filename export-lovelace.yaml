button_card_templates:
  style:
    styles:
      card:
        - border-color: rgba(12, 12, 14, 0.2)
        - border-style: outset
        - border-width: 1px
        - box-shadow: 1px 1px 2px 0px rgba(12, 12, 14,0.3)
  no_style:
    styles:
      card:
        - '--ha-card-border-width': 0px
        - '--paper-card-background-color': rgba(0, 0, 0, 0.0)
        - '--ha-card-background': rgba(0, 0, 0, 0.0)
        - '--ha-card-box-shadow': none
  mini_card:
    variables:
      var_name_temp: Temp
      var_name_hum: Hum
      var_name_lum: Lum
      var_name_mouv: Mouv
    show_icon: true
    show_name: false
    show_state: false
    show_label: true
    template:
      - police
      - no_style
    styles:
      img_cell:
        - border-radius: 50%
        - width: 36px
        - height: 36px
        - background-color: var(--img-cell-off)
        - color: var(--text-on)
        - border-color: rgba(12, 12, 14, 0.2)
        - border-style: outset
        - border-width: 1px
      icon:
        - width: 50%
        - color: var(--icon-off)
        - filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.3))
      label:
        - font-weight: 600
        - font-size: 12px
        - color: var(--text-on)
        - margin-top: 05px
        - filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.3))
        - white-space: normal
      state:
        - font-weight: 600
        - font-size: 12px
        - color: var(--text-on)
        - margin-top: 05px
        - filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.3))
      name:
        - font-weight: 600
        - font-size: 12px
        - color: var(--text-on)
        - margin-top: 02px
        - filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.3))
      card:
        - border-radius: 15px
        - height: auto
      custom_fields:
        notification:
          - border-radius: 50%
          - position: absolute
          - left: 61%
          - top: 3%
          - height: 17px
          - width: 17px
          - font-size: 11px
          - line-height: 18px
          - font-weight: null
          - background-color: |
              [[[
                if (entity.state == "off" || entity.state == "locked" || entity.state == 0 )
                  return 'rgba(0,191,205,0)';
               return 'rgba(0, 0, 0, 0.3)';
              ]]]
          - color: |
              [[[
                if (entity.state == "off" || entity.state == "locked" || entity.state == 0)
                  return 'rgba(0,191,205,0)';
               return 'var(--text-on)';
              ]]]
    double_tap_action:
      action: toggle
    tap_action:
      action: more-info
  security_mini_card_state:
    state:
      - operator: template
        value: >-
          [[[ return entity.state == "arming"  || entity.state == "unlocking" ||
          entity.state == "locking" ]]]
        styles:
          img_cell:
            - background-color: var(--color-img-cell-green)
          icon:
            - color: var(--color-icon-green)
      - operator: template
        value: >-
          [[[ return entity.state == "on" || entity.state == "home" ||
          entity.state == "armed_away" || entity.state == "armed_home" || 
          entity.state == "armed_night" || entity.state == "unlocked" ]]]
        styles:
          img_cell:
            - background-color: var(--color-img-cell-red)
          icon:
            - color: var(--color-icon-red)
      - operator: template
        value: '[[[ return entity.state == "triggered" ]]]'
        styles:
          img_cell:
            - background-color: var(--color-img-cell-dark-red)
          icon:
            - color: var(--color-icon-red)
      - operator: template
        value: '[[[ return entity.state == "pending" ]]]'
        styles:
          img_cell:
            - background-color: var(--color-img-cell-orange)
          icon:
            - color: var(--color-icon-orange)
      - operator: template
        value: >-
          [[[ return entity.state == "unavailable"  || entity.state == "jammed"
          || entity.state == "unknown" ]]]
        styles:
          img_cell:
            - background-color: var(--color-img-cell-red)
          icon:
            - color: var(--color-icon-red)
            - animation: blink 0.8s ease infinite
          name:
            - color: var(--color-icon-red)
  custom_state:
    show_state: false
    show_label: true
    label: |
      [[[
        if( entity.state == "unavailable")
          return "Indisponible"
        if (entity.attributes.device_class == "opening" && entity.state == "on" )
          return "Ouvert"  
        if (entity.attributes.device_class == "opening" && entity.state == "off" )
          return "Fermé"  
        if (entity.attributes.device_class == "door" && entity.state == "on" )
          return "Ouvert"  
        if (entity.attributes.device_class == "door" && entity.state == "off" )
          return "Fermé"            
        if (entity.attributes.device_class == "motion" && entity.state == "on" )
          return "Détecté"  
        if (entity.attributes.device_class == "motion" && entity.state == "off" )
          return "Rien"   
        if (entity.attributes.device_class == "occupancy" && entity.state == "on" )
          return "Occupé"  
        if (entity.attributes.device_class == "occupancy" && entity.state == "off" )
          return "Absent"           
        if( entity.state == "off")
            return "Désactivé"
        if( entity.state == "on")          
          return  "Activé" 
        if( entity.state == "home")          
          return  "Présent" 
        if( entity.state == "not_home")          
          return  "Absent"         
        if( entity.state == "disarmed")          
          return  "Désarmé" 
        if( entity.state == "armed_away")          
          return  "Absent" 
        if( entity.state == "armed_home")          
          return  "Présent" 
        if( entity.state == "arming")          
          return  "Armement" 
        if( entity.state == "armed_night")          
          return  "Nuit" 
        if( entity.state == "triggered")          
          return  "Déclenché"
        if( entity.state == "pending")          
          return  "Attente"         
        if( entity.state == "locked")          
          return  "Verrouillé" 
        if( entity.state == "locking")          
          return  "Verrouillage"          
        if( entity.state == "unlocked")          
          return  "Déverrouillé"
        if( entity.state == "unlocking")          
          return  "Déerrouillage"          
        if( entity.state == "cleaning")          
          return  "Nettoyage" 
        if( entity.state == "returning")          
          return  "Retour"      
        if( entity.state == "error")          
          return  "Erreur"      
        if( entity.state == "idle")          
          return  "Pause"      
        if( entity.state == "paused")          
          return  "Pause"                
        if( entity.state == "docked")          
          return  "Base"  
        if( entity.state == "playing")          
          return  "En cours"  
        if( entity.state == "standby")          
          return  "Éteint" 
        if( entity.state == "Cellular")          
          return  "Cellulaire"
        if( entity.state == "Stationnaire")          
          return  "Rien"           
        return entity.state ]]]
  base_high:
    styles:
      card:
        - height: 106px
  sub_button_state:
    state:
      - operator: template
        value: >-
          [[[ return entity.state == "on" || entity.state > 0 || entity.state ==
          "home" || entity.state == "heat" || entity.state == "Run" ||
          entity.state == "armed_away" || entity.state == "playing" ||
          entity.state == "veille" || entity.state == "Wi-Fi"  || entity.state
          == "Mouvement" || entity.state == "Marche" || entity.state == "Vélo" 
          || entity.state == "Course" ]]]
        styles:
          icon:
            - color: var(--color-icon-blue)
          card:
            - background-color: var(--color-card-blue)
      - operator: template
        value: >-
          [[[ return entity.state == "unlocking"  || entity.state == "locking"  
          ]]]
        styles:
          icon:
            - color: var(--color-icon-yellow)
          card:
            - background-color: var(--color-card-yellow)
      - operator: template
        value: >-
          [[[ return entity.state == "unlocked"  || entity.state == "Conduite"
          || entity.state == "Cellular"  ]]]
        styles:
          icon:
            - color: var(--color-icon-red)
          card:
            - background-color: var(--color-card-red)
      - operator: template
        value: >-
          [[[ return entity.state == "unavailable"  || entity.state == "jammed"
          || entity.state == "unknown" ]]]
        styles:
          card:
            - background-color: var(--color-card-red)
          icon:
            - color: var(--color-icon-red)
            - animation: blink 0.8s ease infinite
          name:
            - color: var(--color-icon-red)
    tap_action:
      action: more-info
    double_tap_action:
      action: more-info
  sub_button:
    show_name: false
    show_state: false
    show_label: false
    show_icon: true
    template:
      - police
      - style
    styles:
      card:
        - border-radius: 12px
        - height: 30px
        - padding: 1px
        - line-height: 77%
      icon:
        - color: var(--icon-off)
        - width: 15px
        - filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.3))
      name:
        - font-size: 9px
        - filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.3))
      label:
        - font-size: 11px
        - filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.3))
      state:
        - font-size: 11px
        - filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.3))
    double_tap_action:
      action: more-info
    tap_action:
      action: more-info
  room_card:
    template:
      - style
    label: |
      [[[
        if( entity.state == "unavailable")
          return "Indisponible"
        if( entity.state == "off")
          return variables.var_label
        var lum = states[entity.entity_id].attributes.brightness/2.54;
        var roundLum =  Math.round(lum * 1) / 1; 
        return variables.var_label + "  " + roundLum + "%" ]]] 
    styles:
      label:
        - color: |
            [[[           
              if (variables.temp_state < 18.9)
                return 'var(--color-icon-blue)'
              if (variables.temp_state  > 26.9)
                return 'var(--color-red)'                 
              if (variables.temp_state  > 24.9)
                return 'var(--color-orange)'               
              return "var(--text-off)"
            ]]]
      custom_fields:
        notification:
          - border-radius: 50%
          - position: absolute
          - left: 33px
          - top: 4%
          - height: 15px
          - width: 15px
          - font-size: 85%
          - line-height: 17px
          - font-weight: null
          - background-color: |
              [[[
                if (entity.state == "off")
                  return 'rgba(0,191,205,0)';
               return 'rgba(0, 0, 0, 0.4)';
              ]]]
          - color: |
              [[[
                if (entity.state == "off")
                  return 'rgba(0,191,205,0)';
               return 'var(--text-on)';
              ]]]
    state:
      - value: 'on'
        styles:
          card:
            - background-color: |-
                [[[ 
                    var color = '255,215,0'; // Default Color
                    if( states[entity.entity_id].attributes.rgb_color != undefined)
                      color = states[entity.entity_id].attributes.rgb_color;               
                    return 'rgb(' + color + ',0.2)';
                ]]]
          img_cell:
            - background-color: |-
                [[[ 
                  var color = '255,215,0'; // Default Color

                  if( states[entity.entity_id].attributes.rgb_color != undefined)
                    color = states[entity.entity_id].attributes.rgb_color; 
                  
                  return 'rgb(' + color + ',0.4)';
                ]]]
          icon:
            - color: |-
                [[[ 
                  var color = '255,215,0'; // Default Color

                  if( states[entity.entity_id].attributes.rgb_color != undefined)
                    color = states[entity.entity_id].attributes.rgb_color; 
                  
                  return 'rgb(' + color + ',1)';
                ]]]
  police:
    styles:
      card:
        - font-family: Avenir
  base_moyenne:
    styles:
      card:
        - height: 80px
  carte_bouton:
    show_name: false
    show_state: false
    show_icon: true
    styles:
      card:
        - background-color: none
        - border-radius: 12px
        - height: 30px
        - padding: 1px
        - line-height: 77%
      icon:
        - width: 15px
  carte_bouton_state:
    state:
      - value: 'on'
        styles:
          icon:
            - color: |-
                [[[ 
                  var color = '253,49,34'; // Default Color
                  if( states[entity.entity_id].attributes.rgb_color != undefined)
                    color = states[entity.entity_id].attributes.rgb_color; 
                  
                  return 'rgb(' + color + ',1)';
                ]]]
      - value: closed
        styles:
          icon:
            - color: rgb(1,200,82)
            - opacity: 80%
      - value: unlock
        styles:
          icon:
            - color: rgb(1,200,82)
            - opacity: 80%
      - value: open
        styles:
          icon:
            - color: rgb(1,200,82)
            - opacity: 80%
      - value: locked
        styles:
          icon:
            - color: rgb(1,200,82)
            - opacity: 80%
      - value: home
        styles:
          icon:
            - color: rgb(176, 196, 222)
      - value: heat
        styles:
          icon:
            - color: rgb(176, 196, 222)
      - value: armed_away
        styles:
          icon:
            - color: rgb(176, 196, 222)
      - value: playing
        styles:
          icon:
            - color: rgb(176, 196, 222)
      - value: veille
        styles:
          icon:
            - color: rgb(176, 196, 222)
      - value: idle
        styles:
          icon:
            - color: rgb(176, 196, 222)
      - value: 'off'
        styles:
          icon:
            - color: rgb(1,200,82)
            - opacity: 80%
      - value: not_home
        styles:
          icon:
            - color: rgb(211,211,211)
            - opacity: 30%
      - value: disarmed
        styles:
          icon:
            - color: rgb(211,211,211)
            - opacity: 30%
      - value: standby
        styles:
          icon:
            - color: rgb(211,211,211)
            - opacity: 30%
      - value: paused
        styles:
          icon:
            - color: rgb(211,211,211)
            - opacity: 30%
      - value: unavailable
        styles:
          icon:
            - color: red
            - animation: blink 0.8s ease infinite
    tap_action:
      action: more-info
  state_unavailable:
    state:
      - value: unavailable
        styles:
          card:
            - border-color: rgba(255, 0, 0, 0.8)
            - opacity: 100%
          img_cell:
            - background-color: black
          icon:
            - color: var(--custom-icon-color-red)
            - animation: blink 0.8s ease infinite
            - transition: 1s ease
          name:
            - color: red
          label:
            - color: red
          state:
            - color: red
  carte_ronde:
    show_icon: true
    show_name: false
    show_state: false
    show_label: false
    aspect_ratio: 1/1
    template:
      - police
      - style
    styles:
      img_cell:
        - border-radius: 100%
        - width: 27px
        - height: 27px
        - background-color: var(--pastille_off)
        - color: var(--text_systeme_info)
      icon:
        - width: 62%
        - color: var(--icon_off)
      card:
        - border-radius: 50%
        - padding: 0px
  carte_jauge:
    template:
      - carte_ronde
      - state_unavailable
    show_icon: false
    show_state: true
    show_name: true
    show_label: true
    styles:
      name:
        - font-size: 90%
      state:
        - font-size: 130%
        - font-weight: bold
      label:
        - font-size: 90%
      custom_fields:
        gauge:
          - position: absolute
          - top: 50.5%
          - left: 50%
          - opacity: 90%
          - width: calc(95% + 0px)
          - transform: translate(-50%, calc(-50% + 0px))
          - '--paper-card-background-color': rgba(0, 0, 0, 0.0)
          - '--ha-card-background': rgba(0, 0, 0, 0.0)
          - '--ha-card-box-shadow': none
          - '--ha-card-border-width': 0px
    custom_fields:
      gauge:
        card:
          type: custom:hatc-gauge-card
          height: 50px
          title:
            name: false
            icon: false
          gauge:
            unit_of_measurement: false
            icon: false
            icon-size: 20px
            state: false
            text-color: lightgrey
            font-size: 20px
            friendly_name: true
  base:
    show_icon: true
    show_name: true
    show_state: false
    show_label: true
    template:
      - police
      - style
    styles:
      grid:
        - grid-template-areas: '"i n" "i s" "i l" '
        - grid-template-columns: min-content auto
        - grid-template-rows: min-content min-content min-content
      img_cell:
        - background-color: var(--pastille_off)
        - border-radius: 50%
        - place-self: start
        - text-align: start
        - width: 35px
        - height: 35px
      icon:
        - width: 55%
        - color: var(--icon_off)
      name:
        - color: rgba(232,233,242,1)
        - align-self: end
        - justify-self: start
        - text-align: left
        - font-weight: null
        - font-size: 13px
        - margin-left: 9px
      state:
        - white-space: normal
        - color: lightgrey
        - justify-self: start
        - align-self: end
        - font-weight: bold
        - text-align: left
        - font-size: 12px
        - filter: opacity(90%)
        - margin-left: 9px
        - line-height: 110%
        - margin-top: 0px
      label:
        - white-space: normal
        - color: lightgrey
        - justify-self: start
        - align-self: start
        - text-align: left
        - font-weight: bold
        - font-size: 12px
        - filter: opacity(90%)
        - margin-left: 9px
        - margin-bottom: 2px
        - line-height: 110%
      card:
        - padding: 8px 5px 8px 5px
        - font-size: 100%
        - white-space: normal
      custom_fields:
        bouton:
          - position: absolute
          - top: 70%
          - left: 50%
          - width: calc(90% + 1px)
          - transform: translate(-50%, calc(-50% + 10px))
          - '--ha-card-border-width': 0px
        jauge-cercle:
          - top: '-03%'
          - left: 75%
          - width: 25%
          - position: absolute
          - z-index: 2
          - '--paper-card-background-color': rgba(0, 0, 0, 0.0)
          - '--ha-card-background': rgba(0, 0, 0, 0.0)"
          - '--ha-card-box-shadow': none
          - '--ha-card-border-width': 0px
        jauge-horizontal:
          - opacity: 90%
          - position: absolute
          - top: 65%
          - left: 0%
          - width: calc(100% + 0px)
          - transform: translate(-50%, calc(-50% + 10px))
          - z-index: 1
          - '--paper-card-background-color': rgba(0, 0, 0, 0.0)
          - '--ha-card-background': rgba(0, 0, 0, 0.0)"
          - '--ha-card-box-shadow': none
          - '--ha-card-border-width': 0px
        graph_temp:
          - position: absolute
          - top: 80%
          - left: 50%
          - width: calc(100% + 15px)
          - transform: translate(-50%, calc(-50% + 10px))
          - '--paper-card-background-color': rgba(0, 0, 0, 0.0)
          - '--ha-card-background': rgba(0, 0, 0, 0.0)"
          - '--ha-card-box-shadow': none
          - '--ha-card-border-width': 0px
        temp:
          - position: absolute
          - left: 8%
          - top: 60px
          - font-size: 20px
          - font-weight: bold
        hum:
          - position: absolute
          - left: 60%
          - top: 60px
          - font-size: 20px
          - font-weight: bold
    tap_action:
      action: more-info
    double_tap_action:
      action: toggle
  base_tres_large:
    styles:
      card:
        - height: 147px
  carte_systeme:
    styles:
      custom_fields:
        reload:
          - position: absolute
          - top: 2%
          - left: 113%
          - width: calc(55% + 1px)
          - transform: translate(-50%, calc(-50% + 10px))
          - z-index: 1
          - '--paper-card-background-color': rgba(0, 0, 0, 0.0)
          - '--ha-card-background': rgba(0, 0, 0, 0.0)"
          - '--ha-card-box-shadow': none
          - opacity: 100%
          - '--ha-card-border-width': 0px
        graph:
          - position: absolute
          - top: 60%
          - left: 50%
          - width: calc(100% + 15px)
          - transform: translate(-50%, calc(-50% + 10px))
          - '--paper-card-background-color': rgba(0, 0, 0, 0.0)
          - '--ha-card-background': rgba(0, 0, 0, 0.0)"
          - '--ha-card-box-shadow': none
          - '--ha-card-border-width': 0px
        graph_bar:
          - position: absolute
          - top: 69%
          - left: 51%
          - width: calc(100% + 35px)
          - transform: translate(-50%, calc(-50% + 10px))
          - '--paper-card-background-color': rgba(0, 0, 0, 0.0)
          - '--ha-card-background': rgba(0, 0, 0, 0.0)"
          - '--ha-card-box-shadow': none
          - '--ha-card-border-width': 0px
        info1:
          - color: var(--text_systeme_info)
          - position: absolute
          - top: 50px
          - left: 10px
          - font-size: 90%
          - font-weight: null
          - text-align: left
          - white-space: normal
        info2:
          - color: var(--text_systeme_info)
          - position: absolute
          - top: 70px
          - left: 10px
          - font-size: 90%
          - font-weight: null
          - text-align: left
        info3:
          - color: var(--text_systeme_info)
          - position: absolute
          - top: 90px
          - left: 10px
          - font-size: 90%
          - font-weight: null
          - text-align: left
        info4:
          - color: var(--text_systeme_info)
          - position: absolute
          - top: 110px
          - left: 10px
          - font-size: 90%
          - font-weight: null
          - text-align: left
  switch:
    template:
      - vert_on
      - rouge_off
    size: 20px
    show_label: true
    label: |
      [[[ return (entity.attributes.value )]]]
    styles:
      card:
        - border-radius: 20px
        - box-shadow: none
        - padding: 10px 0px 8px 0px
      grid:
        - grid-template-areas: '"i" "n" "l"'
      name:
        - margin-top: 10px
        - justify-self: center
        - font-weight: bold
        - font-size: 14px
      label:
        - justify-self: center
        - align-self: start
        - font-weight: bolder
        - font-size: 12px
        - filter: opacity(40%)
      icon:
        - color: rgba(51,51,51,0.2)
      img_cell:
        - background-color: rgba(51,51,51,0.05)
        - border-radius: 50%
        - place-self: center
        - width: 42px
        - height: 42px
  arming:
    state:
      - id: arming
        styles:
          icon:
            - color: rgba(1, 200, 82, 1)
          img_cell:
            - background-color: rgba(1, 200, 82, 0.2)
        value: 'on'
  vert_off:
    state:
      - id: vert_off
        styles:
          icon:
            - color: rgba(1, 200, 82, 1)
          img_cell:
            - background-color: rgba(1, 200, 82, 0.2)
        value: 'off'
  vert_on:
    state:
      - id: vert_on
        styles:
          icon:
            - color: rgba(1, 200, 82, 1)
          img_cell:
            - background-color: rgba(1, 200, 82, 0.2)
        value: 'on'
  rouge_on:
    state:
      - id: rouge_on
        styles:
          icon:
            - color: rgba(245, 68, 54, 1)
          img_cell:
            - background-color: rgba(245, 68, 54, 0.2)
        value: 'on'
  alarme_on:
    state:
      - id: alarme_on
        styles:
          icon:
            - color: rgba(245, 68, 54, 1)
          img_cell:
            - background-color: rgba(245, 68, 54, 0.2)
        value: 'on'
  armed_home:
    state:
      - id: armed_home
        styles:
          icon:
            - color: rgba(245, 68, 54, 1)
          img_cell:
            - background-color: rgba(245, 68, 54, 0.2)
        value: 'on'
  rouge_off:
    state:
      - id: rouge_off
        styles:
          icon:
            - color: rgba(245, 68, 54, 1)
          img_cell:
            - background-color: rgba(245, 68, 54, 0.2)
        value: 'off'
  bouton_titre:
    show_icon: false
    show_name: true
    show_state: false
    show_label: true
    styles:
      name:
        - top: 30%
        - margin-left: 5px
        - justify-self: center
        - font-size: 15px
        - font-weight: bold
        - font-style: italic
        - color: var(--text_title)
        - position: absolute
      label:
        - top: 30%
        - left: 65%
        - font-size: 13px
        - font-style: italic
        - color: var(--text_title)
        - position: absolute
      card:
        - height: 25px
  scene:
    template:
      - rouge_on
      - vert_off
    size: 20px
    show_label: false
    show_name: false
    label: |
      [[[ return (entity.attributes.value )]]]
    styles:
      card:
        - border-radius: 20px
        - box-shadow: none
        - padding: 10px 0px 8px 0px
        - '--ha-card-border-width': 0px
        - '--paper-card-background-color': rgba(0, 0, 0, 0.0)
        - '--ha-card-background': rgba(0, 0, 0, 0.0)
        - '--ha-card-box-shadow': none
      grid:
        - grid-template-areas: '"i" "n" "l"'
      name:
        - margin-top: 10px
        - justify-self: center
        - font-weight: bold
        - font-size: 14px
      label:
        - justify-self: center
        - align-self: start
        - font-weight: bolder
        - font-size: 12px
        - filter: opacity(40%)
      icon:
        - color: rgba(51,51,51,0.2)
      img_cell:
        - border-radius: 50%
        - place-self: center
        - width: 42px
        - height: 42px
decluttering_templates:
  header_temperature_graph:
    card:
      type: custom:mini-graph-card
      entities:
        - entity: sensor.station_meteo_temperature
          color: null
      hours_to_show: 24
      hour24: true
      animate: true
      update_interval: 30
      aggregate_func: avg
      line_width: 1
      bar_spacing: 10
      height: 40
      group: true
      show:
        labels: false
        fill: false
        state: false
        name: false
        icon: false
      card_mod:
        style: |
          ha-card {
            height: 84px;
            position: absolute;
            box-shadow: none;
            background: none;
            border-radius: 0;
            opacity: 0.3;
            margin-bottom: -90px;
            margin-left: -0.6em;
            margin-right: -0.6em;
          }
  header_main:
    card:
      type: custom:paper-buttons-row
      styles:
        justify-content: space-between
        background: none
        margin: 24px 20px 16px
        text-shadow: 0px 0px 20px var(--card-background-color);
      buttons:
        - layout: name_state
          name: '{{ states(''sensor.jour_fr'') }} {{ states(''sensor.date_fr'') }}'
          state: '{{ now().strftime(''%H'') }}:{{ now().strftime(''%M'')}}'
          styles:
            name:
              font-weight: 400
              font-size: 14px
              margin-left: 0
              display: block
              text-align: left
              float: left
              width: 140px
            button:
              pointer-events: none
              align-items: left
              width: 140px
              line-height: 1.6em
            state:
              font-weight: 700
              font-size: 26px
              letter-spacing: '-1px'
              margin-left: 0
              display: block
              text-align: left
              float: left
              width: 140px
        - layout: icon|name_state
          name: ⌂ {{ states('sensor.station_meteo_temperature') }}°C
          state: '{{ states(''sensor.station_meteo_capteur_jardin_temperature'') }}°C'
          image: |
            {% set mapper =
              { 'breezy':'cloudy',
                'clear-night':'night',
                'clear':'day',
                'mostly-clear':'day',
                'clear-day':'day',
                'cloudy':'cloudy',
                'fog':'fog',
                'rainy':'rainy-7',
                'haze':'haze',
                'lightning':'thunder',
                'mostly-cloudy':'cloudy',
                'partlycloudy':'cloudy-day-3',
                'partly-cloudy-day':'partly-cloudy-day',
                'partly-cloudy-night':'partly-cloudy-night',
                'rain':'rainy-4',
                'scattered-showers':'rainy-3',
                'showers':'rainy-6',
                'sleet':'sleet',
                'snow':'snowy-6',
                'mostly-sunny':'day',
                'sunny':'day',
                'thunderstorm':'thunder',
                'tornado':'tornado',
                'wind':'wind',
                'windy':'wind'} %}
            {% set state = states('weather.maison') %}
            {% set weather = mapper[state] if state in mapper else 'weather' %}
            {% set path = '/local/images/weather_icons/animated/' %}
            {% set ext = '.svg'%}
              {{[path,weather,ext]|join('')}}
          styles:
            name:
              font-weight: 400
              font-size: 16px
              margin-left: 0
              display: block
              text-align: right
              width: 140px
            button:
              pointer-events: none
              align-items: right
              width: 140px
              line-height: 1.6em
            state:
              font-weight: 600
              font-size: 26px
              letter-spacing: '-1px'
              margin-left: 0
              display: block
              text-align: right
              width: 140px
            icon:
              position: absolute
              left: 2px
              transform: scale(0.17)
              transform-origin: 0 19.5%
              top: '-48px;'
              padding: 0;
              height: 370px !important;
              width: 370px !important;
  header_temperature_graph_2:
    card:
      type: custom:mini-graph-card
      entities:
        - entity: sensor.maison_familiale_viking_0203502038_87_00_temperature
          color: null
      hours_to_show: 24
      hour24: true
      animate: true
      update_interval: 30
      aggregate_func: avg
      line_width: 1
      bar_spacing: 10
      height: 40
      group: true
      show:
        labels: false
        fill: false
        state: false
        name: false
        icon: false
      card_mod:
        style: |
          ha-card {
            height: 84px;
            position: absolute;
            box-shadow: none;
            background: none;
            border-radius: 0;
            opacity: 0.3;
            margin-bottom: -90px;
            margin-left: -0.6em;
            margin-right: -0.6em;
          }
  header_main_2:
    card:
      type: custom:paper-buttons-row
      styles:
        justify-content: space-between
        background: none
        margin: 24px 20px 16px
        text-shadow: 0px 0px 20px var(--card-background-color);
      buttons:
        - layout: name_state
          name: '{{ states(''sensor.jour_fr'') }} {{ states(''sensor.date_fr'') }}'
          state: '{{ now().strftime(''%H'') }}:{{ now().strftime(''%M'')}}'
          styles:
            name:
              font-weight: 400
              font-size: 14px
              margin-left: 0
              display: block
              text-align: left
              float: left
              width: 140px
            button:
              pointer-events: none
              align-items: left
              width: 140px
              line-height: 1.6em
            state:
              font-weight: 700
              font-size: 26px
              letter-spacing: '-1px'
              margin-left: 0
              display: block
              text-align: left
              float: left
              width: 140px
        - layout: icon|name_state
          name: >-
            ⌂ {{ states('sensor.maison_familiale_lumi_lumi_weather_temperature')
            }}°C
          state: >-
            {{
            states('sensor.maison_familiale_viking_0203502038_87_00_temperature')
            }}°C
          image: |
            {% set mapper =
              { 'breezy':'cloudy',
                'clear-night':'night',
                'clear':'day',
                'mostly-clear':'day',
                'clear-day':'day',
                'cloudy':'cloudy',
                'fog':'fog',
                'rainy':'rainy-7',
                'haze':'haze',
                'lightning':'thunder',
                'mostly-cloudy':'cloudy',
                'partlycloudy':'cloudy-day-3',
                'partly-cloudy-day':'partly-cloudy-day',
                'partly-cloudy-night':'partly-cloudy-night',
                'rain':'rainy-4',
                'scattered-showers':'rainy-3',
                'showers':'rainy-6',
                'sleet':'sleet',
                'snow':'snowy-6',
                'mostly-sunny':'day',
                'sunny':'day',
                'thunderstorm':'thunder',
                'tornado':'tornado',
                'wind':'wind',
                'windy':'wind'} %}
            {% set state = states('weather.maison_familiale') %}
            {% set weather = mapper[state] if state in mapper else 'weather' %}
            {% set path = '/local/images/weather_icons/animated/' %}
            {% set ext = '.svg'%}
              {{[path,weather,ext]|join('')}}
          styles:
            name:
              font-weight: 400
              font-size: 16px
              margin-left: 0
              display: block
              text-align: right
              width: 140px
            button:
              pointer-events: none
              align-items: right
              width: 140px
              line-height: 1.6em
            state:
              font-weight: 600
              font-size: 26px
              letter-spacing: '-1px'
              margin-left: 0
              display: block
              text-align: right
              width: 140px
            icon:
              position: absolute
              left: 2px
              transform: scale(0.17)
              transform-origin: 0 19.5%
              top: '-48px;'
              padding: 0;
              height: 370px !important;
              width: 370px !important;
views:
  - title: Accueil
    icon: mdi:home
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:vertical-stack-in-card
            style: |
              ha-card { 
                border-radius: 20px !important;
                border-color: rgba(12, 12, 14, 0.2);
                border-style: outset;
                border-width: 1px;
              }
            cards:
              - type: custom:decluttering-card
                template: header_temperature_graph
              - type: custom:decluttering-card
                template: header_main
              - type: custom:meteofrance-weather-card
                entity: weather.maison
                number_of_forecasts: '5'
                hourly_forecast: false
                one_hour_forecast: false
                daily_forecast: true
                wind_forecast_icons: false
                details: false
                alert_forecast: false
                humidity_forecast: false
                animated_icons: true
                current: false
          - type: custom:vertical-stack-in-card
            horizontal: true
            style: |
              ha-card { 
                box-shadow: none;
                background: none;
              }
            cards:
              - entity: alarm_control_panel.master
                template: scene
                type: custom:button-card
                name: Alarme
                state:
                  - icon: mdi:alarm-light
                    id: vert_off
                    value: armed_home
                  - icon: mdi:alarm-light-off
                    id: rouge_on
                    value: disarmed
              - type: custom:button-card
                entity: alarm_control_panel.eufy_base
                template: scene
                name: Caméras
                state:
                  - icon: mdi:video-outline
                    id: vert_off
                    value: armed_home
                  - icon: mdi:video-off-outline
                    id: rouge_on
                    value: disarmed
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/alarme
              - entity: lock.smart_lock_pro
                template: scene
                type: custom:button-card
                name: Serrure
                state:
                  - icon: mdi:lock-alert
                    id: rouge_on
                    value: unlocked
                  - icon: mdi:lock-check
                    id: vert_off
                    value: locked
              - entity: group.all_open_sensor_entities
                template: scene
                type: custom:button-card
                name: Ouvertures
                state:
                  - icon: mdi:door-open
                    id: rouge_on
                    value: 'on'
                  - icon: mdi:door-closed
                    id: vert_off
                    value: 'off'
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/fermetures
              - entity: group.all_motion_sensor_entities
                template: scene
                type: custom:button-card
                name: Mouvements
                icon: mdi:run
                state:
                  - id: rouge_on
                    value: 'on'
                  - id: vert_off
                    value: 'off'
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/detection
              - entity: group.all_smoke_sensor_entities
                template: scene
                type: custom:button-card
                name: Fumée
                state:
                  - icon: mdi:fire
                    id: rouge_on
                    value: 'on'
                  - icon: mdi:fire
                    id: vert_off
                    value: 'off'
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: sensor.station_meteo_temperature
                name: Salon
                icon: none
                show_icon: true
                show_name: false
                show_state: true
                show_label: false
                styles:
                  state:
                    - color: white
                    - top: 40%
                    - left: 40%
                    - font-size: 150%
                    - position: absolute
                  img_cell:
                    - background-color: rgba(70,70,70,0.5)
                    - border-radius: 50%
                    - top: 29%
                    - left: 37%
                    - width: 80px
                    - height: 50px
                    - position: absolute
                  card:
                    - background: url(/local/images/background/salon.jpeg)
                    - background-size: cover
                    - height: 106px
                    - padding: 10px
                    - font-size: 100%
                    - border-radius: 10px
                  custom_fields:
                    bouton:
                      - position: absolute
                      - top: 10%
                      - left: 15%
                      - width: calc(25% + 1px)
                      - transform: translate(-50%, calc(-50% + 10px))
                state:
                  - value: '23.9'
                    styles:
                      img_cell:
                        - background-color: rgba(100,0,0,0.5)
                  - value: '24'
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--button-card-light-color)
                custom_fields:
                  bouton:
                    card:
                      type: vertical-stack
                      cards:
                        - type: custom:button-card
                          entity: cover.volet_salon
                          template:
                            - carte_bouton
                            - carte_bouton_state
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/piece_principale
              - type: custom:button-card
                entity: sensor.temp_humidite_04_chambre_parents_temperature
                name: Etage
                icon: none
                show_icon: true
                show_name: false
                show_state: true
                show_label: false
                styles:
                  state:
                    - color: white
                    - top: 40%
                    - left: 25%
                    - font-size: 150%
                    - position: absolute
                  img_cell:
                    - background-color: rgba(70,70,70,0.5)
                    - border-radius: 50%
                    - top: 29%
                    - left: 22%
                    - width: 80px
                    - height: 50px
                    - position: absolute
                  card:
                    - background: url(/local/images/background/chambre.jpeg)
                    - background-size: cover
                    - height: 106px
                    - padding: 10px
                    - font-size: 100%
                    - border-radius: 10px
                  custom_fields:
                    bouton:
                      - position: absolute
                      - top: 10%
                      - left: 85%
                      - width: calc(25% + 1px)
                      - transform: translate(-50%, calc(-50% + 10px))
                custom_fields:
                  bouton:
                    card:
                      type: vertical-stack
                      cards:
                        - type: custom:button-card
                          entity: cover.velux_parents
                          template:
                            - carte_bouton
                            - carte_bouton_state
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/etage
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: sensor.mouvement_03_garage_temperature_air
                name: Garage
                icon: none
                show_icon: true
                show_name: false
                show_state: true
                show_label: false
                styles:
                  state:
                    - color: white
                    - top: 40%
                    - left: 40%
                    - font-size: 150%
                    - position: absolute
                  img_cell:
                    - background-color: rgba(70,70,70,0.5)
                    - border-radius: 50%
                    - top: 29%
                    - left: 35%
                    - width: 80px
                    - height: 50px
                    - position: absolute
                  card:
                    - background: url(/local/images/background/garage.jpeg)
                    - background-size: cover
                    - height: 106px
                    - padding: 10px
                    - font-size: 100%
                    - border-radius: 10px
                  custom_fields:
                    bouton:
                      - position: absolute
                      - top: 70%
                      - left: 15%
                      - width: calc(25% + 1px)
                      - transform: translate(-50%, calc(-50% + 10px))
                custom_fields:
                  bouton:
                    card:
                      type: vertical-stack
                      cards:
                        - type: custom:button-card
                          entity: cover.garage
                          template:
                            - carte_bouton
                            - carte_bouton_state
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/garage
              - type: custom:button-card
                entity: sensor.station_meteo_capteur_jardin_temperature
                name: Jardin
                icon: none
                show_icon: true
                show_name: false
                show_state: true
                show_label: false
                styles:
                  state:
                    - color: white
                    - top: 40%
                    - left: 25%
                    - font-size: 150%
                    - position: absolute
                  img_cell:
                    - background-color: rgba(70,70,70,0.5)
                    - border-radius: 50%
                    - top: 29%
                    - left: 22%
                    - width: 80px
                    - height: 50px
                    - position: absolute
                  card:
                    - background: url(/local/images/background/jardin.jpeg)
                    - background-size: cover
                    - height: 106px
                    - padding: 10px
                    - font-size: 100%
                    - border-radius: 10px
                  custom_fields:
                    bouton:
                      - position: absolute
                      - top: 40%
                      - left: 80%
                      - width: calc(25% + 1px)
                      - transform: translate(-50%, calc(-50% + 10px))
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/jardin
          - type: custom:atomic-calendar-revive
            style: |
              ha-card { 
                box-shadow: none;
                background: none;
              }
              .event-left{
                display: flex;
                flex-direction: column !important;
                align-items: center;
              }
            name: Agenda
            entities:
              - entity: calendar.calendrier
                name: My Calendar
                color: black
                max_results: 12
                icon: mdi:calendar
              - entity: calendar.pitchouns
                name: Pitchouns
                color: red
                icon: mdi:calendar
              - entity: calendar.delphine_et_thomas
                name: Delphine et Thomas
                color: blue
                icon: mdi:calendar
            titleSize: 10px
            firstDayOfWeek: 1
            refreshInterval: 60
            showDate: false
            hideDuplicates: false
            hideFinishedEvents: true
            showCurrentEventLine: false
            showProgressBar: false
            showMonth: true
            showWeekDay: false
            showDescription: false
            disableEventLink: true
            showFullDayProgress: false
            showEventIcon: false
            showHiddenText: false
            showCalendarName: false
            showWeekNumber: false
            showRelativeTime: false
            calShowDescription: false
            showLastCalendarWeek: false
            dimFinishedEvents: true
            disableCalLink: true
            disableCalLocationLink: true
            disableCalEventLink: truemaxEventCount
            noEventsForNextDaysText: Aucun événement dans les prochains jours
            showLoader: false
            maxEventCount: 4
            cardHeight: 125px
            maxDaysToShow: 30
            showDatePerEvent: true
            language: fr
  - theme: Backend-selected
    title: Rez de chaussée
    path: piece_principale
    icon: mdi:home-floor-0
    subview: true
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: light.hue_enrave_ceiling_1
                name: Entrée
                icon: mdi:door-closed
                show_icon: true
                show_name: true
                show_state: false
                show_label: true
                label: >
                  [[[ return (states['sensor.station_meteo_temperature'].state )
                  + "°C"; ]]]
                styles:
                  img_cell:
                    - background-color: rgba(70,70,70,0.5)
                    - border-radius: 50%
                    - place-self: start
                    - width: 40px
                    - height: 40px
                  icon:
                    - place-self: start
                    - width: 80%
                  name:
                    - top: 15%
                    - left: 35%
                    - font-size: 110%
                    - font-weight: bold
                    - position: absolute
                  state:
                    - color: lightgrey
                    - top: 15%
                    - left: 50%
                    - font-size: 90%
                    - position: absolute
                  label:
                    - color: |
                        [[[
                          if (states['sensor.station_meteo_temperature'].state < 19)
                            return 'dodgerblue';
                          if (states['sensor.station_meteo_temperature'].state > 25)
                            return 'red';
                          return 'darkgrey';
                        ]]]
                    - top: 35%
                    - left: 35%
                    - font-weight: bold
                    - font-size: 120%
                    - position: absolute
                  card:
                    - height: 106px
                    - padding: 10px
                    - font-size: 100%
                    - background-color: rgba(255, 255, 255, 0.6)
                    - border-radius: 10px
                    - animation: ball-scale 0.2s
                  custom_fields:
                    bouton:
                      - position: absolute
                      - top: 70%
                      - left: 50%
                      - width: calc(90% + 1px)
                      - transform: translate(-50%, calc(-50% + 10px))
                extra_styles: |
                  @keyframes ball-scale {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                  @keyframes ball-scale2 {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                state:
                  - value: 'on'
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--button-card-light-color)
                      icon:
                        - color: var(--icon_on)
                        - transition: 2s ease
                      name:
                        - color: var(--text_on)
                      label:
                        - color: |
                            [[[
                              if (states['sensor.station_meteo_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.station_meteo_temperature'].state > 25)
                                return 'red';
                             return 'darkgrey';
                            ]]]
                  - value: 'off'
                    color: grey
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--pastille_off)
                      icon:
                        - color: var(--icon_off)
                        - transition: 2s ease
                      name:
                        - color: grey
                      label:
                        - color: |
                            [[[
                              if (states['sensor.station_meteo_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.station_meteo_temperature'].state > 25)
                                return 'red';
                             return 'grey';
                            ]]]
                custom_fields:
                  bouton:
                    card:
                      type: horizontal-stack
                      cards:
                        - type: custom:button-card
                          entity: >-
                            binary_sensor.capteur_ouverture_07_porte_entree_door_state
                          icon: mdi:door
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: lock.smart_lock_pro
                          icon: mdi:lock
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: binary_sensor.entree_motion
                          icon: mdi:exit-run
                          template:
                            - carte_bouton
                            - carte_bouton_state
                double_tap_action:
                  action: navigate
                  navigation_path: /lovelace/plantes
              - type: custom:button-card
                entity: light.lampe_salon
                name: Salon
                icon: mdi:sofa
                show_icon: true
                show_name: true
                show_state: false
                show_label: true
                label: >
                  [[[ return (states['sensor.station_meteo_temperature'].state )
                  + "°C"; ]]]
                styles:
                  img_cell:
                    - background-color: rgba(70,70,70,0.5)
                    - border-radius: 50%
                    - place-self: start
                    - width: 40px
                    - height: 40px
                  icon:
                    - place-self: start
                    - width: 80%
                  name:
                    - top: 15%
                    - left: 35%
                    - font-size: 110%
                    - font-weight: bold
                    - position: absolute
                  state:
                    - color: lightgrey
                    - top: 15%
                    - left: 50%
                    - font-size: 90%
                    - position: absolute
                  label:
                    - color: |
                        [[[
                          if (states['sensor.station_meteo_temperature'].state < 19)
                            return 'dodgerblue';
                          if (states['sensor.station_meteo_temperature'].state > 25)
                            return 'red';
                          return 'darkgrey';
                        ]]]
                    - top: 35%
                    - left: 35%
                    - font-weight: bold
                    - font-size: 120%
                    - position: absolute
                  card:
                    - height: 106px
                    - padding: 10px
                    - font-size: 100%
                    - background-color: rgba(255, 255, 255, 0.6)
                    - border-radius: 10px
                    - animation: ball-scale 0.2s
                  custom_fields:
                    bouton:
                      - position: absolute
                      - top: 70%
                      - left: 50%
                      - width: calc(90% + 1px)
                      - transform: translate(-50%, calc(-50% + 10px))
                extra_styles: |
                  @keyframes ball-scale {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                  @keyframes ball-scale2 {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                state:
                  - value: 'on'
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--button-card-light-color)
                      icon:
                        - color: var(--icon_on)
                        - transition: 2s ease
                      name:
                        - color: var(--text_on)
                      label:
                        - color: |
                            [[[
                              if (states['sensor.station_meteo_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.station_meteo_temperature'].state > 25)
                                return 'red';
                             return 'darkgrey';
                            ]]]
                  - value: 'off'
                    color: grey
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--pastille_off)
                      icon:
                        - color: var(--icon_off)
                        - transition: 2s ease
                      name:
                        - color: grey
                      label:
                        - color: |
                            [[[
                              if (states['sensor.station_meteo_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.station_meteo_temperature'].state > 25)
                                return 'red';
                             return 'grey';
                            ]]]
                custom_fields:
                  bouton:
                    card:
                      type: horizontal-stack
                      cards:
                        - type: custom:button-card
                          entity: light.lampe_salon
                          icon: mdi:lamp
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: media_player.salon
                          icon: mdi:speaker
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: binary_sensor.mouvement_06_salle_a_manger_occupancy
                          icon: mdi:run
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: binary_sensor.capteur_ouverture_01_sam_door_state
                          icon: mdi:window-closed-variant
                          template:
                            - carte_bouton
                            - carte_bouton_state
                double_tap_action:
                  action: navigate
                  navigation_path: /lovelace/piece_principale
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: light.spots_cuisine
                name: Cuisine
                icon: mdi:food
                show_icon: true
                show_name: true
                show_state: false
                show_label: true
                label: >
                  [[[ return
                  (states['sensor.temp_humidite_05_cuisine_temperature'].state )
                  + "°C"; ]]]
                styles:
                  img_cell:
                    - background-color: rgba(70,70,70,0.5)
                    - border-radius: 50%
                    - place-self: start
                    - width: 40px
                    - height: 40px
                  icon:
                    - place-self: start
                    - width: 80%
                  name:
                    - top: 15%
                    - left: 35%
                    - font-size: 110%
                    - font-weight: bold
                    - position: absolute
                  state:
                    - color: lightgrey
                    - top: 15%
                    - left: 50%
                    - font-size: 90%
                    - position: absolute
                  label:
                    - color: |
                        [[[
                          if (states['sensor.temp_humidite_05_cuisine_temperature'].state < 19)
                            return 'dodgerblue';
                          if (states['sensor.temp_humidite_05_cuisine_temperature'].state > 25)
                            return 'red';
                          return 'darkgrey';
                        ]]]
                    - top: 35%
                    - left: 35%
                    - font-weight: bold
                    - font-size: 120%
                    - position: absolute
                  card:
                    - height: 106px
                    - padding: 10px
                    - font-size: 100%
                    - background-color: rgba(255, 255, 255, 0.6)
                    - border-radius: 10px
                    - animation: ball-scale 0.2s
                  custom_fields:
                    bouton:
                      - position: absolute
                      - top: 70%
                      - left: 50%
                      - width: calc(90% + 1px)
                      - transform: translate(-50%, calc(-50% + 10px))
                extra_styles: |
                  @keyframes ball-scale {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                  @keyframes ball-scale2 {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                state:
                  - value: 'on'
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--button-card-light-color)
                      icon:
                        - color: var(--icon_on)
                        - transition: 2s ease
                      name:
                        - color: var(--text_on)
                      label:
                        - color: |
                            [[[
                              if (states['sensor.temp_humidite_05_cuisine_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.temp_humidite_05_cuisine_temperature'].state > 25)
                                return 'red';
                             return 'darkgrey';
                            ]]]
                  - value: 'off'
                    color: grey
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--pastille_off)
                      icon:
                        - color: var(--icon_off)
                        - transition: 2s ease
                      name:
                        - color: grey
                      label:
                        - color: |
                            [[[
                              if (states['sensor.temp_humidite_05_cuisine_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.temp_humidite_05_cuisine_temperature'].state > 25)
                                return 'red';
                             return 'grey';
                            ]]]
                custom_fields:
                  bouton:
                    card:
                      type: horizontal-stack
                      cards:
                        - type: custom:button-card
                          entity: media_player.cuisine
                          icon: mdi:speaker
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: binary_sensor.mouvement_05_cuisine_occupancy
                          icon: mdi:run
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: binary_sensor.capteur_ouverture_13_cuisine_contact
                          icon: mdi:window-closed-variant
                          template:
                            - carte_bouton
                            - carte_bouton_state
                double_tap_action:
                  action: navigate
                  navigation_path: /lovelace/piece_principale
              - type: custom:button-card
                entity: light.sam
                name: SàM
                icon: mdi:table-chair
                show_icon: true
                show_name: true
                show_state: false
                show_label: true
                label: >
                  [[[ return (states['sensor.station_meteo_temperature'].state )
                  + "°C"; ]]]
                styles:
                  img_cell:
                    - background-color: rgba(70,70,70,0.5)
                    - border-radius: 50%
                    - place-self: start
                    - width: 40px
                    - height: 40px
                  icon:
                    - place-self: start
                    - width: 80%
                  name:
                    - top: 15%
                    - left: 35%
                    - font-size: 110%
                    - font-weight: bold
                    - position: absolute
                  state:
                    - color: lightgrey
                    - top: 15%
                    - left: 50%
                    - font-size: 90%
                    - position: absolute
                  label:
                    - color: |
                        [[[
                          if (states['sensor.station_meteo_temperature'].state < 19)
                            return 'dodgerblue';
                          if (states['sensor.station_meteo_temperature'].state > 25)
                            return 'red';
                          return 'darkgrey';
                        ]]]
                    - top: 35%
                    - left: 35%
                    - font-weight: bold
                    - font-size: 120%
                    - position: absolute
                  card:
                    - height: 106px
                    - padding: 10px
                    - font-size: 100%
                    - background-color: rgba(255, 255, 255, 0.6)
                    - border-radius: 10px
                    - animation: ball-scale 0.2s
                  custom_fields:
                    bouton:
                      - position: absolute
                      - top: 70%
                      - left: 50%
                      - width: calc(90% + 1px)
                      - transform: translate(-50%, calc(-50% + 10px))
                extra_styles: |
                  @keyframes ball-scale {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                  @keyframes ball-scale2 {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                state:
                  - value: 'on'
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--button-card-light-color)
                      icon:
                        - color: var(--icon_on)
                        - transition: 2s ease
                      name:
                        - color: var(--text_on)
                      label:
                        - color: |
                            [[[
                              if (states['sensor.station_meteo_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.station_meteo_temperature'].state > 25)
                                return 'red';
                             return 'darkgrey';
                            ]]]
                  - value: 'off'
                    color: grey
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--pastille_off)
                      icon:
                        - color: var(--icon_off)
                        - transition: 2s ease
                      name:
                        - color: grey
                      label:
                        - color: |
                            [[[
                              if (states['sensor.station_meteo_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.station_meteo_temperature'].state > 25)
                                return 'red';
                             return 'grey';
                            ]]]
                custom_fields:
                  bouton:
                    card:
                      type: horizontal-stack
                      cards:
                        - type: custom:button-card
                          entity: light.prise_buffet
                          icon: mdi:led-strip-variant
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: binary_sensor.mouvement_07_salon_occupancy
                          icon: mdi:run
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: binary_sensor.capteur_ouverture_02_salon_door_state
                          icon: mdi:window-closed-variant
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: binary_sensor.capteur_ouverture_11_salon_contact
                          icon: mdi:window-closed-variant
                          template:
                            - carte_bouton
                            - carte_bouton_state
                double_tap_action:
                  action: navigate
                  navigation_path: /lovelace/plantes
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: light.sdb
                name: Salle de bain
                icon: mdi:bathtub
                show_icon: true
                show_name: true
                show_state: false
                show_label: true
                label: >
                  [[[ return
                  (states['sensor.temp_humidite_08_salle_de_bain_temperature'].state
                  ) + "°C"; ]]]
                styles:
                  img_cell:
                    - background-color: rgba(70,70,70,0.5)
                    - border-radius: 50%
                    - place-self: start
                    - width: 40px
                    - height: 40px
                  icon:
                    - place-self: start
                    - width: 80%
                  name:
                    - top: 15%
                    - left: 35%
                    - font-size: 110%
                    - font-weight: bold
                    - position: absolute
                  state:
                    - color: lightgrey
                    - top: 15%
                    - left: 50%
                    - font-size: 90%
                    - position: absolute
                  label:
                    - color: |
                        [[[
                          if (states['sensor.temp_humidite_08_salle_de_bain_temperature'].state < 19)
                            return 'dodgerblue';
                          if (states['sensor.temp_humidite_08_salle_de_bain_temperature'].state > 25)
                            return 'red';
                          return 'darkgrey';
                        ]]]
                    - top: 35%
                    - left: 35%
                    - font-weight: bold
                    - font-size: 120%
                    - position: absolute
                  card:
                    - height: 106px
                    - padding: 10px
                    - font-size: 100%
                    - background-color: rgba(255, 255, 255, 0.6)
                    - border-radius: 10px
                    - animation: ball-scale 0.2s
                  custom_fields:
                    humidite:
                      - color: |
                          [[[
                            if (states['sensor.temp_humidite_08_salle_de_bain_humidity'].state < 40)
                              return 'dodgerblue';
                            if (states['sensor.temp_humidite_08_salle_de_bain_humidity'].state > 70)
                              return 'red';
                            return 'darkgrey';
                          ]]]
                      - top: 37%
                      - left: 63%
                      - font-weight: bold
                      - font-size: 120%
                      - position: absolute
                    bouton:
                      - position: absolute
                      - top: 70%
                      - left: 50%
                      - width: calc(90% + 1px)
                      - transform: translate(-50%, calc(-50% + 10px))
                extra_styles: |
                  @keyframes ball-scale {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                  @keyframes ball-scale2 {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                state:
                  - value: 'on'
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--button-card-light-color)
                      icon:
                        - color: var(--icon_on)
                        - transition: 2s ease
                      name:
                        - color: var(--text_on)
                      label:
                        - color: |
                            [[[
                              if (states['sensor.temp_humidite_08_salle_de_bain_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.temp_humidite_08_salle_de_bain_temperature'].state > 25)
                                return 'red';
                             return 'darkgrey';
                            ]]]
                  - value: 'off'
                    color: grey
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--pastille_off)
                      icon:
                        - color: var(--icon_off)
                        - transition: 2s ease
                      name:
                        - color: grey
                      label:
                        - color: |
                            [[[
                              if (states['sensor.temp_humidite_08_salle_de_bain_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.temp_humidite_08_salle_de_bain_temperature'].state > 25)
                                return 'red';
                             return 'grey';
                            ]]]
                custom_fields:
                  bouton:
                    card:
                      type: horizontal-stack
                      cards:
                        - type: custom:button-card
                          entity: media_player.salon
                          icon: mdi:speaker
                          template:
                            - carte_bouton
                            - carte_bouton_state
                  humidite: >
                    [[[ return
                    (states['sensor.temp_humidite_08_salle_de_bain_humidity'].state)
                    + "%"; ]]]
                double_tap_action:
                  action: navigate
                  navigation_path: /lovelace/piece_principale
              - type: custom:button-card
                entity: switch.interrupteur_05_wc
                name: WC
                icon: mdi:toilet
                show_icon: true
                show_name: true
                show_state: false
                show_label: true
                styles:
                  img_cell:
                    - background-color: rgba(70,70,70,0.5)
                    - border-radius: 50%
                    - place-self: start
                    - width: 40px
                    - height: 40px
                  icon:
                    - place-self: start
                    - width: 80%
                  name:
                    - top: 15%
                    - left: 35%
                    - font-size: 110%
                    - font-weight: bold
                    - position: absolute
                  state:
                    - color: lightgrey
                    - top: 15%
                    - left: 50%
                    - font-size: 90%
                    - position: absolute
                  label:
                    - top: 35%
                    - left: 35%
                    - font-weight: bold
                    - font-size: 120%
                    - position: absolute
                  card:
                    - height: 106px
                    - padding: 10px
                    - font-size: 100%
                    - background-color: rgba(255, 255, 255, 0.6)
                    - border-radius: 10px
                    - animation: ball-scale 0.2s
                  custom_fields:
                    bouton:
                      - position: absolute
                      - top: 70%
                      - left: 50%
                      - width: calc(90% + 1px)
                      - transform: translate(-50%, calc(-50% + 10px))
                extra_styles: |
                  @keyframes ball-scale {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                  @keyframes ball-scale2 {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                state:
                  - value: 'on'
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--button-card-light-color)
                      icon:
                        - color: var(--icon_on)
                        - transition: 2s ease
                      name:
                        - color: var(--text_on)
                      label: null
                  - value: 'off'
                    color: grey
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--pastille_off)
                      icon:
                        - color: var(--icon_off)
                        - transition: 2s ease
                      name:
                        - color: grey
                      label: null
                custom_fields:
                  bouton:
                    card:
                      type: horizontal-stack
                      cards:
                        - type: custom:button-card
                          entity: binary_sensor.mouvement_09_wc_occupancy
                          template:
                            - carte_bouton
                            - carte_bouton_state
                double_tap_action:
                  action: navigate
                  navigation_path: /lovelace/piece_principale
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: light.ludotheque
                name: Salle de jeux
                icon: mdi:gamepad-variant
                show_icon: true
                show_name: true
                show_state: false
                show_label: true
                label: >
                  [[[ return
                  (states['sensor.temp_humidite_01_salle_de_jeux_temperature'].state
                  ) + "°C"; ]]]
                styles:
                  img_cell:
                    - background-color: rgba(70,70,70,0.5)
                    - border-radius: 50%
                    - place-self: start
                    - width: 40px
                    - height: 40px
                  icon:
                    - place-self: start
                    - width: 80%
                  name:
                    - top: 15%
                    - left: 35%
                    - font-size: 110%
                    - font-weight: bold
                    - position: absolute
                  state:
                    - color: lightgrey
                    - top: 15%
                    - left: 50%
                    - font-size: 90%
                    - position: absolute
                  label:
                    - color: |
                        [[[
                          if (states['sensor.temp_humidite_01_salle_de_jeux_temperature'].state < 19)
                            return 'dodgerblue';
                          if (states['sensor.temp_humidite_01_salle_de_jeux_temperature'].state > 25)
                            return 'red';
                          return 'darkgrey';
                        ]]]
                    - top: 35%
                    - left: 35%
                    - font-weight: bold
                    - font-size: 120%
                    - position: absolute
                  card:
                    - height: 106px
                    - padding: 10px
                    - font-size: 100%
                    - background-color: rgba(255, 255, 255, 0.6)
                    - border-radius: 10px
                    - animation: ball-scale 0.2s
                  custom_fields:
                    bouton:
                      - position: absolute
                      - top: 70%
                      - left: 50%
                      - width: calc(90% + 1px)
                      - transform: translate(-50%, calc(-50% + 10px))
                extra_styles: |
                  @keyframes ball-scale {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                  @keyframes ball-scale2 {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                state:
                  - value: 'on'
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--button-card-light-color)
                      icon:
                        - color: var(--icon_on)
                        - transition: 2s ease
                      name:
                        - color: var(--text_on)
                      label:
                        - color: |
                            [[[
                              if (states['sensor.temp_humidite_01_salle_de_jeux_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.temp_humidite_01_salle_de_jeux_temperature'].state > 25)
                                return 'red';
                             return 'darkgrey';
                            ]]]
                  - value: 'off'
                    color: grey
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--pastille_off)
                      icon:
                        - color: var(--icon_off)
                        - transition: 2s ease
                      name:
                        - color: grey
                      label:
                        - color: |
                            [[[
                              if (states['sensor.temp_humidite_01_salle_de_jeux_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['ssensor.temp_humidite_01_salle_de_jeux_temperature'].state > 25)
                                return 'red';
                             return 'grey';
                            ]]]
                custom_fields:
                  bouton:
                    card:
                      type: horizontal-stack
                      cards:
                        - type: custom:button-card
                          entity: binary_sensor.mouvement_01_salle_de_jeux_occupancy
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: >-
                            binary_sensor.capteur_ouverture_09_salle_de_jeux_contact
                          template:
                            - carte_bouton
                            - carte_bouton_state
                double_tap_action:
                  action: navigate
                  navigation_path: /lovelace/piece_principale
              - type: custom:button-card
                entity: light.bureau
                name: Bureau
                icon: mdi:desktop-classic
                show_icon: true
                show_name: true
                show_state: false
                show_label: true
                label: >
                  [[[ return
                  (states['sensor.temp_humidite_06_bureau_temperature'].state )
                  + "°C"; ]]]
                styles:
                  img_cell:
                    - background-color: rgba(70,70,70,0.5)
                    - border-radius: 50%
                    - place-self: start
                    - width: 40px
                    - height: 40px
                  icon:
                    - place-self: start
                    - width: 80%
                  name:
                    - top: 15%
                    - left: 35%
                    - font-size: 110%
                    - font-weight: bold
                    - position: absolute
                  state:
                    - color: lightgrey
                    - top: 15%
                    - left: 50%
                    - font-size: 90%
                    - position: absolute
                  label:
                    - color: |
                        [[[
                          if (states['sensor.temp_humidite_06_bureau_temperature'].state < 19)
                            return 'dodgerblue';
                          if (states['sensor.temp_humidite_06_bureau_temperature'].state > 25)
                            return 'red';
                          return 'darkgrey';
                        ]]]
                    - top: 35%
                    - left: 35%
                    - font-weight: bold
                    - font-size: 120%
                    - position: absolute
                  card:
                    - height: 106px
                    - padding: 10px
                    - font-size: 100%
                    - background-color: rgba(255, 255, 255, 0.6)
                    - border-radius: 10px
                    - animation: ball-scale 0.2s
                  custom_fields:
                    bouton:
                      - position: absolute
                      - top: 70%
                      - left: 50%
                      - width: calc(90% + 1px)
                      - transform: translate(-50%, calc(-50% + 10px))
                extra_styles: |
                  @keyframes ball-scale {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                  @keyframes ball-scale2 {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                state:
                  - value: 'on'
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--button-card-light-color)
                      icon:
                        - color: var(--icon_on)
                        - transition: 2s ease
                      name:
                        - color: var(--text_on)
                      label:
                        - color: |
                            [[[
                              if (states['sensor.temp_humidite_08_salle_de_bain_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.temp_humidite_08_salle_de_bain_temperature'].state > 25)
                                return 'red';
                             return 'darkgrey';
                            ]]]
                  - value: 'off'
                    color: grey
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--pastille_off)
                      icon:
                        - color: var(--icon_off)
                        - transition: 2s ease
                      name:
                        - color: grey
                      label:
                        - color: |
                            [[[
                              if (states['sensor.temp_humidite_08_salle_de_bain_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.temp_humidite_08_salle_de_bain_temperature'].state > 25)
                                return 'red';
                             return 'grey';
                            ]]]
                custom_fields:
                  bouton:
                    card:
                      type: horizontal-stack
                      cards:
                        - type: custom:button-card
                          entity: light.mdl110_2106218738150490853248e1e972d2b6_none
                          icon: mdi:desk-lamp
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: media_player.bureau
                          icon: mdi:speaker
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: binary_sensor.mouvement_08_bureau_presence
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: binary_sensor.capteur_ouverture_10_bureau_contact
                          template:
                            - carte_bouton
                            - carte_bouton_state
                double_tap_action:
                  action: navigate
                  navigation_path: /lovelace/piece_principale
          - type: custom:mushroom-vacuum-card
            entity: vacuum.tony
            commands:
              - clean_spot
              - on_off
              - start_pause
              - return_home
          - type: conditional
            conditions:
              - entity: climate.piece_de_vie
                state_not: 'off'
            card:
              type: picture-elements
              image: /local/images/netatmo/background.png
              elements:
                - type: image
                  entity: climate.piece_de_vie
                  title: mode absent
                  tap_action:
                    action: call-service
                    service: Script.netatmo_mode_absent
                  hold_action:
                    action: more-info
                  image: /local/images/netatmo/absent.png
                  style:
                    top: 37%
                    left: 53.6%
                    width: 10%
                - type: image
                  entity: climate.piece_de_vie
                  title: mode planifié
                  tap_action:
                    action: call-service
                    service: Script.netatmo_mode_schedule
                  hold_action:
                    action: more-info
                  image: /local/images/netatmo/chauffe.png
                  style:
                    top: 37%
                    left: 69.6%
                    width: 12%
                - type: image
                  entity: climate.piece_de_vie
                  title: mode off
                  tap_action:
                    action: call-service
                    service: Script.netatmo_mode_off
                  hold_action:
                    action: more-info
                  image: /local/images/netatmo/off.png
                  style:
                    top: 37%
                    left: 86%
                    width: 09%
                - type: image
                  entity: climate.piece_de_vie
                  title: Up Consigne
                  tap_action:
                    action: call-service
                    service: Script.netatmo_increment_consigne
                  hold_action:
                    action: more-info
                  image: /local/images/netatmo/plus.png
                  style:
                    top: 67.5%
                    left: 78.4%
                    width: 6%
                - type: image
                  entity: climate.piece_de_vie
                  title: Down Consigne
                  tap_action:
                    action: call-service
                    service: Script.netatmo_decrement_consigne
                  hold_action:
                    action: more-info
                  image: /local/images/netatmo/moins.png
                  style:
                    top: 67.5%
                    left: 61.5%
                    width: 6%
                - type: image
                  entity: sensor.netatmo_hvac_modes
                  title: Temoin Chauffe
                  tap_action:
                    action: none
                  image: /local/images/netatmo/iddle_on.png
                  style:
                    top: 74%
                    left: 25.5%
                    width: 7%
                  state_filter:
                    iddle: opacity(0%)
                    heating: brightness(100%) saturate(1)
                - type: image
                  entity: sensor.netatmo_preset_mode
                  title: schedule
                  tap_action:
                    action: none
                  image: /local/images/netatmo/chauffe.png
                  style:
                    top: 30%
                    left: 39%
                    width: 12%
                  state_filter:
                    boost: opacity(0%)
                    Schedule: brightness(100%) saturate(1)
                    away: opacity(0%)
                    Frost Guard: opacity(0%)
                - type: image
                  entity: sensor.netatmo_preset_mode
                  title: absent
                  tap_action:
                    action: none
                  image: /local/images/netatmo/absent.png
                  style:
                    top: 30%
                    left: 39%
                    width: 9%
                  state_filter:
                    boost: opacity(0%)
                    Schedule: opacity(0%)
                    away: brightness(100%) saturate(1)
                    Frost Guard: opacity(0%)
                - type: state-label
                  entity: sensor.netatmo_temperature_courante
                  unit_of_measurement: .
                  style:
                    top: 55%
                    left: 25.5%
                    font-size: 1.9em
                    color: black
                    font-weight: 600
                - type: state-label
                  entity: sensor.netatmo_temperature_consigne
                  style:
                    top: 25%
                    left: 25.5%
                    font-size: 1em
                    color: white
                    font-weight: 600
          - type: horizontal-stack
            cards:
              - type: tile
                entity: switch.prise_09_salon_l2
                icon: mdi:power-plug
                name: Station de charge
          - type: entities
            entities:
              - entity: cover.volets_rdc
                secondary_info: last-changed
                icon: mdi:blinds-vertical
                name: Volets RdC
  - title: etage
    path: etage
    icon: mdi:home-floor-1
    subview: true
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: entities
            entities:
              - entity: cover.volets_etage
                icon: mdi:blinds-vertical
                secondary_info: last-changed
                name: Tous les volets
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: light.chambre_parentale
                name: null
                icon: mdi:bed-double
                show_icon: true
                show_name: true
                show_state: false
                show_label: true
                label: >
                  [[[ return
                  (states['sensor.temp_humidite_04_chambre_parents_temperature'].state
                  ) + "°C"; ]]]
                styles:
                  img_cell:
                    - background-color: rgba(70,70,70,0.5)
                    - border-radius: 50%
                    - place-self: start
                    - width: 40px
                    - height: 40px
                  icon:
                    - place-self: start
                    - width: 80%
                  name:
                    - top: 15%
                    - left: 35%
                    - font-size: 110%
                    - font-weight: bold
                    - position: absolute
                  state:
                    - color: lightgrey
                    - top: 15%
                    - left: 50%
                    - font-size: 90%
                    - position: absolute
                  label:
                    - color: |
                        [[[
                          if (states['sensor.temp_humidite_04_chambre_parents_temperature'].state < 19)
                            return 'dodgerblue';
                          if (states['sensor.temp_humidite_04_chambre_parents_temperature'].state > 25)
                            return 'red';
                          return 'darkgrey';
                        ]]]
                    - top: 35%
                    - left: 35%
                    - font-weight: bold
                    - font-size: 120%
                    - position: absolute
                  card:
                    - height: 106px
                    - padding: 10px
                    - font-size: 100%
                    - background-color: rgba(255, 255, 255, 0.6)
                    - border-radius: 10px
                    - animation: ball-scale 0.2s
                  custom_fields:
                    bouton:
                      - position: absolute
                      - top: 70%
                      - left: 50%
                      - width: calc(90% + 1px)
                      - transform: translate(-50%, calc(-50% + 10px))
                extra_styles: |
                  @keyframes ball-scale {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                  @keyframes ball-scale2 {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                state:
                  - value: 'on'
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--button-card-light-color)
                      icon:
                        - color: var(--icon_on)
                        - transition: 2s ease
                      name:
                        - color: var(--text_on)
                      label:
                        - color: |
                            [[[
                              if (states['sensor.temp_humidite_04_chambre_parents_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.temp_humidite_04_chambre_parents_temperature'].state > 25)
                                return 'red';
                             return 'darkgrey';
                            ]]]
                  - value: 'off'
                    color: grey
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--pastille_off)
                      icon:
                        - color: var(--icon_off)
                        - transition: 2s ease
                      name:
                        - color: grey
                      label:
                        - color: |
                            [[[
                              if (states['sensor.temp_humidite_04_chambre_parents_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.temp_humidite_04_chambre_parents_temperature'].state > 25)
                                return 'red';
                             return 'grey';
                            ]]]
                custom_fields:
                  bouton:
                    card:
                      type: horizontal-stack
                      cards:
                        - type: custom:button-card
                          entity: media_player.salon
                          icon: mdi:speaker
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: binary_sensor.mouvement_07_salon_occupancy
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: binary_sensor.capteur_ouverture_02_salon_door_state
                          template:
                            - carte_bouton
                            - carte_bouton_state
                double_tap_action:
                  action: navigate
                  navigation_path: /lovelace/piece_principale
              - type: custom:button-card
                entity: light.bandeau_dressing
                name: Dressing
                icon: mdi:wardrobe
                show_icon: true
                show_name: true
                show_state: false
                show_label: true
                label: >
                  [[[ return (states['sensor.station_meteo_temperature'].state )
                  + "°C"; ]]]
                styles:
                  img_cell:
                    - background-color: rgba(70,70,70,0.5)
                    - border-radius: 50%
                    - place-self: start
                    - width: 40px
                    - height: 40px
                  icon:
                    - place-self: start
                    - width: 80%
                  name:
                    - top: 15%
                    - left: 35%
                    - font-size: 110%
                    - font-weight: bold
                    - position: absolute
                  state:
                    - color: lightgrey
                    - top: 15%
                    - left: 50%
                    - font-size: 90%
                    - position: absolute
                  label:
                    - color: |
                        [[[
                          if (states['sensor.station_meteo_temperature'].state < 19)
                            return 'dodgerblue';
                          if (states['sensor.station_meteo_temperature'].state > 25)
                            return 'red';
                          return 'darkgrey';
                        ]]]
                    - top: 35%
                    - left: 35%
                    - font-weight: bold
                    - font-size: 120%
                    - position: absolute
                  card:
                    - height: 106px
                    - padding: 10px
                    - font-size: 100%
                    - background-color: rgba(255, 255, 255, 0.6)
                    - border-radius: 10px
                    - animation: ball-scale 0.2s
                  custom_fields:
                    bouton:
                      - position: absolute
                      - top: 70%
                      - left: 50%
                      - width: calc(90% + 1px)
                      - transform: translate(-50%, calc(-50% + 10px))
                extra_styles: |
                  @keyframes ball-scale {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                  @keyframes ball-scale2 {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                state:
                  - value: 'on'
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--button-card-light-color)
                      icon:
                        - color: var(--icon_on)
                        - transition: 2s ease
                      name:
                        - color: var(--text_on)
                      label:
                        - color: |
                            [[[
                              if (states['sensor.station_meteo_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.station_meteo_temperature'].state > 25)
                                return 'red';
                             return 'darkgrey';
                            ]]]
                  - value: 'off'
                    color: grey
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--pastille_off)
                      icon:
                        - color: var(--icon_off)
                        - transition: 2s ease
                      name:
                        - color: grey
                      label:
                        - color: |
                            [[[
                              if (states['sensor.station_meteo_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.station_meteo_temperature'].state > 25)
                                return 'red';
                             return 'grey';
                            ]]]
                custom_fields:
                  bouton:
                    card:
                      type: horizontal-stack
                      cards:
                        - type: custom:button-card
                          entity: binary_sensor.mouvement_06_salle_a_manger_occupancy
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: binary_sensor.capteur_ouverture_01_sam_door_state
                          template:
                            - carte_bouton
                            - carte_bouton_state
                double_tap_action:
                  action: navigate
                  navigation_path: /lovelace/piece_principale
          - type: horizontal-stack
            cards:
              - type: tile
                entity: binary_sensor.withings_in_bed_thomas
                color: green
              - type: tile
                entity: light.smart_light_2311171283339359100148e1e9e36126
                name: Lampe chevet Thomas
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: light.chloe
                name: Chloé
                icon: mdi:human-child
                show_icon: true
                show_name: true
                show_state: false
                show_label: true
                label: >
                  [[[ return
                  (states['sensor.temp_humidite_11_chambre_chloe_temperature'].state
                  ) + "°C"; ]]]
                styles:
                  img_cell:
                    - background-color: rgba(70,70,70,0.5)
                    - border-radius: 50%
                    - place-self: start
                    - width: 40px
                    - height: 40px
                  icon:
                    - place-self: start
                    - width: 80%
                  name:
                    - top: 15%
                    - left: 35%
                    - font-size: 110%
                    - font-weight: bold
                    - position: absolute
                  state:
                    - color: lightgrey
                    - top: 15%
                    - left: 50%
                    - font-size: 90%
                    - position: absolute
                  label:
                    - color: |
                        [[[
                          if (states['sensor.temp_humidite_11_chambre_chloe_temperature'].state < 19)
                            return 'dodgerblue';
                          if (states['sensor.temp_humidite_11_chambre_chloe_temperature'].state > 25)
                            return 'red';
                          return 'darkgrey';
                        ]]]
                    - top: 35%
                    - left: 35%
                    - font-weight: bold
                    - font-size: 120%
                    - position: absolute
                  card:
                    - height: 106px
                    - padding: 10px
                    - font-size: 100%
                    - background-color: rgba(255, 255, 255, 0.6)
                    - border-radius: 10px
                    - animation: ball-scale 0.2s
                  custom_fields:
                    bouton:
                      - position: absolute
                      - top: 70%
                      - left: 50%
                      - width: calc(90% + 1px)
                      - transform: translate(-50%, calc(-50% + 10px))
                extra_styles: |
                  @keyframes ball-scale {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                  @keyframes ball-scale2 {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                state:
                  - value: 'on'
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--button-card-light-color)
                      icon:
                        - color: var(--icon_on)
                        - transition: 2s ease
                      name:
                        - color: var(--text_on)
                      label:
                        - color: |
                            [[[
                              if (states['sensor.temp_humidite_11_chambre_chloe_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.temp_humidite_11_chambre_chloe_temperature'].state > 25)
                                return 'red';
                             return 'darkgrey';
                            ]]]
                  - value: 'off'
                    color: grey
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--pastille_off)
                      icon:
                        - color: var(--icon_off)
                        - transition: 2s ease
                      name:
                        - color: grey
                      label:
                        - color: |
                            [[[
                              if (states['sensor.temp_humidite_11_chambre_chloe_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.temp_humidite_11_chambre_chloe_temperature'].state > 25)
                                return 'red';
                             return 'grey';
                            ]]]
                custom_fields:
                  bouton:
                    card:
                      type: horizontal-stack
                      cards:
                        - type: custom:button-card
                          entity: media_player.cuisine
                          icon: mdi:speaker
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: binary_sensor.mouvement_05_cuisine_occupancy
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: >-
                            binary_sensor.capteur_ouverture_08_congelateur_contact
                          template:
                            - carte_bouton
                            - carte_bouton_state
                double_tap_action:
                  action: navigate
                  navigation_path: /lovelace/piece_principale
              - type: custom:button-card
                entity: light.maxence
                name: Maxence
                icon: mdi:human-child
                show_icon: true
                show_name: true
                show_state: false
                show_label: true
                label: >
                  [[[ return
                  (states['sensor.temp_humidite_07_chambre_maxence_temperature'].state
                  ) + "°C"; ]]]
                styles:
                  img_cell:
                    - background-color: rgba(70,70,70,0.5)
                    - border-radius: 50%
                    - place-self: start
                    - width: 40px
                    - height: 40px
                  icon:
                    - place-self: start
                    - width: 80%
                  name:
                    - top: 15%
                    - left: 35%
                    - font-size: 110%
                    - font-weight: bold
                    - position: absolute
                  state:
                    - color: lightgrey
                    - top: 15%
                    - left: 50%
                    - font-size: 90%
                    - position: absolute
                  label:
                    - color: |
                        [[[
                          if (states['sensor.temp_humidite_07_chambre_maxence_temperature'].state < 19)
                            return 'dodgerblue';
                          if (states['sensor.temp_humidite_07_chambre_maxence_temperature'].state > 25)
                            return 'red';
                          return 'darkgrey';
                        ]]]
                    - top: 35%
                    - left: 35%
                    - font-weight: bold
                    - font-size: 120%
                    - position: absolute
                  card:
                    - height: 106px
                    - padding: 10px
                    - font-size: 100%
                    - background-color: rgba(255, 255, 255, 0.6)
                    - border-radius: 10px
                    - animation: ball-scale 0.2s
                  custom_fields:
                    bouton:
                      - position: absolute
                      - top: 70%
                      - left: 50%
                      - width: calc(90% + 1px)
                      - transform: translate(-50%, calc(-50% + 10px))
                extra_styles: |
                  @keyframes ball-scale {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                  @keyframes ball-scale2 {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                state:
                  - value: 'on'
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--button-card-light-color)
                      icon:
                        - color: var(--icon_on)
                        - transition: 2s ease
                      name:
                        - color: var(--text_on)
                      label:
                        - color: |
                            [[[
                              if (states['sensor.temp_humidite_07_chambre_maxence_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.temp_humidite_07_chambre_maxence_temperature'].state > 25)
                                return 'red';
                             return 'darkgrey';
                            ]]]
                  - value: 'off'
                    color: grey
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--pastille_off)
                      icon:
                        - color: var(--icon_off)
                        - transition: 2s ease
                      name:
                        - color: grey
                      label:
                        - color: |
                            [[[
                              if (states['sensor.temp_humidite_07_chambre_maxence_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.temp_humidite_07_chambre_maxence_temperature'].state > 25)
                                return 'red';
                             return 'grey';
                            ]]]
                custom_fields:
                  bouton:
                    card:
                      type: horizontal-stack
                      cards:
                        - type: custom:button-card
                          entity: media_player.cuisine
                          icon: mdi:speaker
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: binary_sensor.mouvement_05_cuisine_occupancy
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: >-
                            binary_sensor.capteur_ouverture_08_congelateur_contact
                          template:
                            - carte_bouton
                            - carte_bouton_state
                double_tap_action:
                  action: navigate
                  navigation_path: /lovelace/piece_principale
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: light.palier
                name: Palier
                icon: mdi:home-floor-1
                show_icon: true
                show_name: true
                show_state: false
                show_label: true
                label: >
                  [[[ return
                  (states['sensor.detecteur_fumee_02_pallier_temperature_air'].state
                  ) + "°C"; ]]]
                styles:
                  img_cell:
                    - background-color: rgba(70,70,70,0.5)
                    - border-radius: 50%
                    - place-self: start
                    - width: 40px
                    - height: 40px
                  icon:
                    - place-self: start
                    - width: 80%
                  name:
                    - top: 15%
                    - left: 35%
                    - font-size: 110%
                    - font-weight: bold
                    - position: absolute
                  state:
                    - color: lightgrey
                    - top: 15%
                    - left: 50%
                    - font-size: 90%
                    - position: absolute
                  label:
                    - color: |
                        [[[
                          if (states['sensor.temp_humidite_01_salle_de_jeux_temperature'].state < 19)
                            return 'dodgerblue';
                          if (states['sensor.temp_humidite_01_salle_de_jeux_temperature'].state > 25)
                            return 'red';
                          return 'darkgrey';
                        ]]]
                    - top: 35%
                    - left: 35%
                    - font-weight: bold
                    - font-size: 120%
                    - position: absolute
                  card:
                    - height: 106px
                    - padding: 10px
                    - font-size: 100%
                    - background-color: rgba(255, 255, 255, 0.6)
                    - border-radius: 10px
                    - animation: ball-scale 0.2s
                  custom_fields:
                    bouton:
                      - position: absolute
                      - top: 70%
                      - left: 50%
                      - width: calc(90% + 1px)
                      - transform: translate(-50%, calc(-50% + 10px))
                extra_styles: |
                  @keyframes ball-scale {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                  @keyframes ball-scale2 {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                state:
                  - value: 'on'
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--button-card-light-color)
                      icon:
                        - color: var(--icon_on)
                        - transition: 2s ease
                      name:
                        - color: var(--text_on)
                      label:
                        - color: |
                            [[[
                              if (states['sensor.detecteur_fumee_02_pallier_temperature_air'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.detecteur_fumee_02_pallier_temperature_air'].state > 25)
                                return 'red';
                             return 'darkgrey';
                            ]]]
                  - value: 'off'
                    color: grey
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--pastille_off)
                      icon:
                        - color: var(--icon_off)
                        - transition: 2s ease
                      name:
                        - color: grey
                      label:
                        - color: |
                            [[[
                              if (states['sensor.detecteur_fumee_02_pallier_temperature_air'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.detecteur_fumee_02_pallier_temperature_air'].state > 25)
                                return 'red';
                             return 'grey';
                            ]]]
                custom_fields:
                  bouton:
                    card:
                      type: horizontal-stack
                      cards:
                        - type: custom:button-card
                          entity: binary_sensor.mouvement_01_salle_de_jeux_occupancy
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: binary_sensor.detecteur_fumee_02_pallier_smoke_alarm
                          template:
                            - carte_bouton
                            - carte_bouton_state
                        - type: custom:button-card
                          entity: switch.vph
                          template:
                            - carte_bouton
                            - carte_bouton_state
              - type: custom:button-card
                entity: light.sdb
                name: Salle d'eau
                icon: mdi:shower-head
                show_icon: true
                show_name: true
                show_state: false
                show_label: true
                label: >
                  [[[ return
                  (states['sensor.temp_humidite_09_salle_de_douche_temperature'].state
                  ) + "°C"; ]]]
                styles:
                  img_cell:
                    - background-color: rgba(70,70,70,0.5)
                    - border-radius: 50%
                    - place-self: start
                    - width: 40px
                    - height: 40px
                  icon:
                    - place-self: start
                    - width: 80%
                  name:
                    - top: 15%
                    - left: 35%
                    - font-size: 110%
                    - font-weight: bold
                    - position: absolute
                  state:
                    - color: lightgrey
                    - top: 15%
                    - left: 50%
                    - font-size: 90%
                    - position: absolute
                  label:
                    - color: |
                        [[[
                          if (states['sensor.temp_humidite_09_salle_de_douche_temperature'].state < 19)
                            return 'dodgerblue';
                          if (states['sensor.temp_humidite_09_salle_de_douche_temperature'].state > 25)
                            return 'red';
                          return 'darkgrey';
                        ]]]
                    - top: 37%
                    - left: 35%
                    - font-weight: bold
                    - font-size: 120%
                    - position: absolute
                  card:
                    - height: 106px
                    - padding: 10px
                    - font-size: 100%
                    - background-color: rgba(255, 255, 255, 0.6)
                    - border-radius: 10px
                    - animation: ball-scale 0.2s
                  custom_fields:
                    humidite:
                      - color: |
                          [[[
                            if (states['sensor.temp_humidite_09_salle_de_douche_humidity'].state < 40)
                              return 'dodgerblue';
                            if (states['sensor.temp_humidite_09_salle_de_douche_humidity'].state > 70)
                              return 'red';
                            return 'darkgrey';
                          ]]]
                      - top: 37%
                      - left: 63%
                      - font-weight: bold
                      - font-size: 120%
                      - position: absolute
                    bouton:
                      - position: absolute
                      - top: 70%
                      - left: 50%
                      - width: calc(90% + 1px)
                      - transform: translate(-50%, calc(-50% + 10px))
                extra_styles: |
                  @keyframes ball-scale {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                  @keyframes ball-scale2 {
                    from {
                      transform: scale(1);
                    }
                    to {
                      transform: scale(0.90);
                    }
                  }
                state:
                  - value: 'on'
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--button-card-light-color)
                      icon:
                        - color: var(--icon_on)
                        - transition: 2s ease
                      name:
                        - color: var(--text_on)
                      label:
                        - color: |
                            [[[
                              if (states['sensor.temp_humidite_09_salle_de_douche_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.temp_humidite_09_salle_de_douche_temperature'].state > 25)
                                return 'red';
                             return 'darkgrey';
                            ]]]
                  - value: 'off'
                    color: grey
                    styles:
                      card:
                        - animation: ball-scale 0.2s
                      img_cell:
                        - background-color: var(--pastille_off)
                      icon:
                        - color: var(--icon_off)
                        - transition: 2s ease
                      name:
                        - color: grey
                      label:
                        - color: |
                            [[[
                              if (states['sensor.temp_humidite_09_salle_de_douche_temperature'].state < 19)
                                return 'dodgerblue';
                              if (states['sensor.temp_humidite_09_salle_de_douche_temperature'].state > 25)
                                return 'red';
                             return 'grey';
                            ]]]
                custom_fields:
                  bouton:
                    card:
                      type: horizontal-stack
                      cards:
                        - type: custom:button-card
                          entity: switch.repeteur_veilleuse_01
                          icon: mdi:checkbox-multiple-blank-circle
                          template:
                            - carte_bouton
                            - carte_bouton_state
                  humidite: >
                    [[[ return
                    (states['sensor.temp_humidite_09_salle_de_douche_humidity'].state)
                    + "%"; ]]]
                double_tap_action:
                  action: navigate
                  navigation_path: /lovelace/piece_principale
  - title: plantes
    path: plantes
    subview: true
    icon: mdi:flower
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:flower-card
            entity: plant.dracaena_margenata
            battery_sensor: sensor.miflora_dracaena_margenata_battery
            show_bars:
              - moisture
              - conductivity
              - temperature
              - illuminance
          - type: custom:flower-card
            entity: plant.monstera_deliciosa
            battery_sensor: sensor.miflora_monstera_deliciosa_battery
            show_bars:
              - moisture
              - conductivity
              - temperature
              - illuminance
          - type: custom:flower-card
            entity: plant.fleur_de_lune
            battery_sensor: sensor.miflora_fleur_de_lune_battery
            show_bars:
              - moisture
              - conductivity
              - temperature
              - illuminance
      - type: vertical-stack
        cards:
          - type: custom:flower-card
            entity: plant.palmier_de_montagne
            battery_sensor: sensor.miflora_palmier_de_montagne_battery
            show_bars:
              - moisture
              - conductivity
              - temperature
              - illuminance
          - type: custom:flower-card
            entity: plant.cactus_de_noel
            battery_sensor: sensor.miflora_cactus_de_noel_battery
            show_bars:
              - moisture
              - conductivity
              - temperature
              - illuminance
          - type: custom:flower-card
            entity: plant.pseudo_ficus
            battery_sensor: sensor.miflora_pseudo_ficus_battery
            show_bars:
              - moisture
              - conductivity
              - temperature
              - illuminance
      - type: vertical-stack
        cards:
          - type: custom:flower-card
            entity: plant.tradescantia
            battery_sensor: sensor.miflora_tradescantia_battery
            show_bars:
              - moisture
              - conductivity
              - temperature
              - illuminance
  - title: garage
    path: garage
    icon: mdi:home-floor-negative-1
    subview: true
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:mushroom-entity-card
            entity: binary_sensor.capteur_ouverture_12_cave_vin_contact
            tap_action:
              action: navigate
              navigation_path: /lovelace/cave-a-vin
            icon: mdi:glass-wine
            name: Cave à vin
          - type: custom:button-card
            entity: light.garage
            name: Cellier
            icon: mdi:food-drumstick
            show_icon: true
            show_name: true
            show_state: false
            show_label: true
            label: >
              [[[ return
              (states['sensor.temp_humidite_15_cellier_temperature'].state ) +
              "°C"; ]]]
            styles:
              img_cell:
                - background-color: rgba(70,70,70,0.5)
                - border-radius: 50%
                - place-self: start
                - width: 40px
                - height: 40px
                - margin-top: 10px
                - margin-left: 15px
              icon:
                - place-self: start
                - width: 90%
              name:
                - top: 19%
                - left: 36%
                - font-size: 110%
                - font-weight: bold
                - position: absolute
              state:
                - color: lightgrey
                - top: 15%
                - left: 50%
                - font-size: 90%
                - position: absolute
              label:
                - color: |
                    [[[
                      if (states['sensor.temp_humidite_15_cellier_temperature'].state < 15)
                        return 'dodgerblue';
                      if (states['sensor.temp_humidite_15_cellier_temperature'].state > 25)
                        return 'red';
                      return 'darkgrey';
                    ]]]
                - top: 37%
                - left: 36%
                - font-weight: bold
                - font-size: 120%
                - position: absolute
              card:
                - height: 100px
                - padding: 10px
                - font-size: 100%
                - background-color: rgba(255, 255, 255, 0.6)
                - border-radius: 20px
                - animation: ball-scale 0.2s
              custom_fields:
                humidite:
                  - color: |
                      [[[
                        if (states['sensor.temp_humidite_15_cellier_humidity'].state < 40)
                          return 'red';
                        if (states['sensor.temp_humidite_15_cellier_humidity'].state > 70)
                          return 'dodgerblue';
                        return 'darkgrey';
                      ]]]
                  - top: 37%
                  - left: 63%
                  - font-weight: bold
                  - font-size: 120%
                  - position: absolute
                bouton:
                  - position: absolute
                  - top: 72%
                  - left: 50%
                  - width: calc(90% + 1px)
                  - transform: translate(-50%, calc(-50% + 10px))
            extra_styles: |
              @keyframes ball-scale {
                from {
                  transform: scale(1);
                }
                to {
                  transform: scale(0.90);
                }
              }
              @keyframes ball-scale2 {
                from {
                  transform: scale(1);
                }
                to {
                  transform: scale(0.90);
                }
              }
            state:
              - value: 'on'
                styles:
                  card:
                    - animation: ball-scale 0.2s
                  img_cell:
                    - background-color: var(--button-card-light-color)
                  icon:
                    - color: var(--icon_on)
                    - transition: 2s ease
                  name:
                    - color: var(--text_on)
                  label:
                    - color: |
                        [[[
                          if (states['sensor.temp_humidite_15_cellier_temperature'].state < 19)
                            return 'dodgerblue';
                          if (states['sensor.temp_humidite_15_cellier_temperature'].state > 24)
                            return 'red';
                         return 'darkgrey';
                        ]]]
              - value: 'off'
                color: grey
                styles:
                  card:
                    - animation: ball-scale 0.2s
                  img_cell:
                    - background-color: var(--pastille_off)
                  icon:
                    - color: var(--icon_off)
                    - transition: 2s ease
                  name:
                    - color: grey
                  label:
                    - color: |
                        [[[
                          if (states['sensor.temp_humidite_15_cellier_temperature'].state < 19)
                            return 'dodgerblue';
                          if (states['sensor.temp_humidite_15_cellier_temperature'].state > 24)
                            return 'red';
                         return 'grey';
                        ]]]
            custom_fields:
              humidite: >
                [[[ return
                (states['sensor.temp_humidite_15_cellier_humidity'].state) +
                "%"; ]]]
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                entities:
                  - sensor.temp_humidite_15_cellier_temperature
                line_color: blue
                line_width: 8
                font_size: 75
              - type: custom:mini-graph-card
                entities:
                  - sensor.temp_humidite_15_cellier_humidity
                line_color: '#e74c3c'
                line_width: 8
                font_size: 75
          - type: tile
            entity: binary_sensor.mouvement_04_cave_a_vin_motion_sensor_status
            name: Présence
            color: red
            show_entity_picture: false
          - type: custom:button-card
            entity: light.garage
            name: Buanderie
            icon: mdi:washing-machine
            show_icon: true
            show_name: true
            show_state: false
            show_label: true
            label: >
              [[[ return
              (states['sensor.temp_humidite_12_buanderie_temperature'].state ) +
              "°C"; ]]]
            styles:
              img_cell:
                - background-color: rgba(70,70,70,0.5)
                - border-radius: 50%
                - place-self: start
                - width: 40px
                - height: 40px
                - margin-top: 10px
                - margin-left: 15px
              icon:
                - place-self: start
                - width: 90%
              name:
                - top: 19%
                - left: 36%
                - font-size: 110%
                - font-weight: bold
                - position: absolute
              state:
                - color: lightgrey
                - top: 15%
                - left: 50%
                - font-size: 90%
                - position: absolute
              label:
                - color: |
                    [[[
                      if (states['sensor.temp_humidite_12_buanderie_temperature'].state < 15)
                        return 'dodgerblue';
                      if (states['sensor.temp_humidite_12_buanderie_temperature'].state > 25)
                        return 'red';
                      return 'darkgrey';
                    ]]]
                - top: 37%
                - left: 36%
                - font-weight: bold
                - font-size: 120%
                - position: absolute
              card:
                - height: 100px
                - padding: 10px
                - font-size: 100%
                - background-color: rgba(255, 255, 255, 0.6)
                - border-radius: 20px
                - animation: ball-scale 0.2s
              custom_fields:
                humidite:
                  - color: |
                      [[[
                        if (states['sensor.temp_humidite_12_buanderie_humidity'].state < 40)
                          return 'red';
                        if (states['sensor.temp_humidite_12_buanderie_humidity'].state > 70)
                          return 'dodgerblue';
                        return 'darkgrey';
                      ]]]
                  - top: 37%
                  - left: 63%
                  - font-weight: bold
                  - font-size: 120%
                  - position: absolute
                bouton:
                  - position: absolute
                  - top: 72%
                  - left: 50%
                  - width: calc(90% + 1px)
                  - transform: translate(-50%, calc(-50% + 10px))
            extra_styles: |
              @keyframes ball-scale {
                from {
                  transform: scale(1);
                }
                to {
                  transform: scale(0.90);
                }
              }
              @keyframes ball-scale2 {
                from {
                  transform: scale(1);
                }
                to {
                  transform: scale(0.90);
                }
              }
            state:
              - value: 'on'
                styles:
                  card:
                    - animation: ball-scale 0.2s
                  img_cell:
                    - background-color: var(--button-card-light-color)
                  icon:
                    - color: var(--icon_on)
                    - transition: 2s ease
                  name:
                    - color: var(--text_on)
                  label:
                    - color: |
                        [[[
                          if (states['sensor.temp_humidite_12_buanderie_temperature'].state < 15)
                            return 'dodgerblue';
                          if (states['sensor.temp_humidite_12_buanderie_temperature'].state > 25)
                            return 'red';
                         return 'darkgrey';
                        ]]]
              - value: 'off'
                color: grey
                styles:
                  card:
                    - animation: ball-scale 0.2s
                  img_cell:
                    - background-color: var(--pastille_off)
                  icon:
                    - color: var(--icon_off)
                    - transition: 2s ease
                  name:
                    - color: grey
                  label:
                    - color: |
                        [[[
                          if (states['sensor.temp_humidite_12_buanderie_temperature'].state < 15)
                            return 'dodgerblue';
                          if (states['sensor.temp_humidite_12_buanderie_temperature'].state > 25)
                            return 'red';
                         return 'grey';
                        ]]]
            custom_fields:
              humidite: >
                [[[ return
                (states['sensor.temp_humidite_12_buanderie_humidity'].state) +
                "%"; ]]]
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                entities:
                  - sensor.temp_humidite_12_buanderie_temperature
                line_color: blue
                line_width: 8
                font_size: 75
              - type: custom:mini-graph-card
                entities:
                  - sensor.temp_humidite_12_buanderie_humidity
                line_color: '#e74c3c'
                line_width: 8
                font_size: 75
          - type: horizontal-stack
            cards:
              - type: tile
                entity: binary_sensor.detecteur_eau_buanderie_water_leak
                name: Eau
                color: red
              - type: tile
                entity: input_boolean.machine_a_laver
                name: Machine à laver
                icon: mdi:washing-machine
                color: red
              - type: entity
                entity: counter.nombre_de_machines_a_laver
          - type: custom:button-card
            entity: light.garage
            name: Garage
            icon: mdi:garage
            show_icon: true
            show_name: true
            show_state: false
            show_label: true
            label: >
              [[[ return
              (states['sensor.mouvement_03_garage_temperature_air'].state ) +
              "°C"; ]]]
            styles:
              img_cell:
                - background-color: rgba(70,70,70,0.5)
                - border-radius: 50%
                - place-self: start
                - width: 40px
                - height: 40px
                - margin-top: 10px
                - margin-left: 15px
              icon:
                - place-self: start
                - width: 90%
              name:
                - top: 19%
                - left: 36%
                - font-size: 110%
                - font-weight: bold
                - position: absolute
              state:
                - color: lightgrey
                - top: 15%
                - left: 50%
                - font-size: 90%
                - position: absolute
              label:
                - color: |
                    [[[
                      if (states['sensor.mouvement_03_garage_temperature_air'].state < 15)
                        return 'dodgerblue';
                      if (states['sensor.mouvement_03_garage_temperature_air'].state > 25)
                        return 'red';
                      return 'darkgrey';
                    ]]]
                - top: 37%
                - left: 36%
                - font-weight: bold
                - font-size: 120%
                - position: absolute
              card:
                - height: 100px
                - padding: 10px
                - font-size: 100%
                - background-color: rgba(255, 255, 255, 0.6)
                - border-radius: 20px
                - animation: ball-scale 0.2s
              custom_fields:
                humidite:
                  - color: |
                      [[[
                        if (states['sensor.mouvement_03_garage_humidity_air'].state < 40)
                          return 'red';
                        if (states['sensor.mouvement_03_garage_humidity_air'].state > 70)
                          return 'dodgerblue';
                        return 'darkgrey';
                      ]]]
                  - top: 37%
                  - left: 63%
                  - font-weight: bold
                  - font-size: 120%
                  - position: absolute
                bouton:
                  - position: absolute
                  - top: 72%
                  - left: 50%
                  - width: calc(90% + 1px)
                  - transform: translate(-50%, calc(-50% + 10px))
            extra_styles: |
              @keyframes ball-scale {
                from {
                  transform: scale(1);
                }
                to {
                  transform: scale(0.90);
                }
              }
              @keyframes ball-scale2 {
                from {
                  transform: scale(1);
                }
                to {
                  transform: scale(0.90);
                }
              }
            state:
              - value: 'on'
                styles:
                  card:
                    - animation: ball-scale 0.2s
                  img_cell:
                    - background-color: var(--button-card-light-color)
                  icon:
                    - color: var(--icon_on)
                    - transition: 2s ease
                  name:
                    - color: var(--text_on)
                  label:
                    - color: |
                        [[[
                          if (states['sensor.mouvement_03_garage_temperature_air'].state < 19)
                            return 'dodgerblue';
                          if (states['sensor.mouvement_03_garage_temperature_air'].state > 24)
                            return 'red';
                         return 'darkgrey';
                        ]]]
              - value: 'off'
                color: grey
                styles:
                  card:
                    - animation: ball-scale 0.2s
                  img_cell:
                    - background-color: var(--pastille_off)
                  icon:
                    - color: var(--icon_off)
                    - transition: 2s ease
                  name:
                    - color: grey
                  label:
                    - color: |
                        [[[
                          if (states['sensor.mouvement_03_garage_temperature_air'].state < 15)
                            return 'dodgerblue';
                          if (states['sensor.mouvement_03_garage_temperature_air'].state > 25)
                            return 'red';
                         return 'grey';
                        ]]]
            custom_fields:
              humidite: >
                [[[ return
                (states['sensor.mouvement_03_garage_humidity_air'].state) + "%";
                ]]]
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                entities:
                  - sensor.mouvement_03_garage_temperature_air
                line_color: blue
                line_width: 8
                font_size: 75
              - type: custom:mini-graph-card
                entities:
                  - sensor.mouvement_03_garage_humidity_air
                line_color: '#e74c3c'
                line_width: 8
                font_size: 75
          - type: horizontal-stack
            cards:
              - type: tile
                entity: binary_sensor.detecteur_fumee_03_garage_smoke
                name: Fumée
              - type: tile
                entity: binary_sensor.detecteur_eau_chaudiere_water_leak
                name: Fuite d'eau
          - type: horizontal-stack
            cards:
              - type: tile
                entity: cover.garage
                color: red
                features:
                  - type: cover-open-close
              - type: tile
                entity: binary_sensor.mouvement_03_garage_motion_sensor_status
                name: Présence
                color: red
                show_entity_picture: false
  - icon: mdi:bottle-wine
    title: cave a vin
    path: cave-a-vin
    subview: true
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:button-card
            entity: light.cave_vin
            name: Cave à vin
            icon: mdi:bottle-wine
            show_icon: true
            show_name: true
            show_state: false
            show_label: true
            label: >
              [[[ return
              (states['sensor.temp_humidite_13_cave_vin_temperature'].state ) +
              "°C"; ]]]
            styles:
              img_cell:
                - background-color: rgba(70,70,70,0.5)
                - border-radius: 50%
                - place-self: start
                - width: 40px
                - height: 40px
                - margin-top: 10px
                - margin-left: 15px
              icon:
                - place-self: start
                - width: 100%
              name:
                - top: 24%
                - left: 36%
                - font-size: 110%
                - font-weight: bold
                - position: absolute
              state:
                - color: lightgrey
                - top: 15%
                - left: 50%
                - font-size: 90%
                - position: absolute
              label:
                - color: |
                    [[[
                      if (states['sensor.temp_humidite_13_cave_vin_temperature'].state < 10)
                        return 'dodgerblue';
                      if (states['sensor.temp_humidite_13_cave_vin_temperature'].state > 20)
                        return 'red';
                      return 'darkgrey';
                    ]]]
                - top: 47%
                - left: 36%
                - font-weight: bold
                - font-size: 120%
                - position: absolute
              card:
                - height: 100px
                - padding: 10px
                - font-size: 100%
                - background-color: rgba(255, 255, 255, 0.6)
                - border-radius: 20px
                - animation: ball-scale 0.2s
              custom_fields:
                humidite:
                  - color: |
                      [[[
                        if (states['sensor.temp_humidite_13_cave_vin_humidity'].state < 65)
                          return 'dodgerblue';
                        if (states['sensor.temp_humidite_13_cave_vin_humidity'].state > 90)
                          return 'red';
                        return 'darkgrey';
                      ]]]
                  - top: 47%
                  - left: 63%
                  - font-weight: bold
                  - font-size: 120%
                  - position: absolute
                bouton:
                  - position: absolute
                  - top: 72%
                  - left: 50%
                  - width: calc(90% + 1px)
                  - transform: translate(-50%, calc(-50% + 10px))
            extra_styles: |
              @keyframes ball-scale {
                from {
                  transform: scale(1);
                }
                to {
                  transform: scale(0.90);
                }
              }
              @keyframes ball-scale2 {
                from {
                  transform: scale(1);
                }
                to {
                  transform: scale(0.90);
                }
              }
            state:
              - value: 'on'
                styles:
                  card:
                    - animation: ball-scale 0.2s
                  img_cell:
                    - background-color: var(--button-card-light-color)
                  icon:
                    - color: var(--icon_on)
                    - transition: 2s ease
                  name:
                    - color: var(--text_on)
                  label:
                    - color: |
                        [[[
                          if (states['sensor.temp_humidite_13_cave_vin_temperature'].state < 10)
                            return 'dodgerblue';
                          if (states['sensor.temp_humidite_13_cave_vin_temperature'].state > 20)
                            return 'red';
                         return 'darkgrey';
                        ]]]
              - value: 'off'
                color: grey
                styles:
                  card:
                    - animation: ball-scale 0.2s
                  img_cell:
                    - background-color: var(--pastille_off)
                  icon:
                    - color: var(--icon_off)
                    - transition: 2s ease
                  name:
                    - color: grey
                  label:
                    - color: |
                        [[[
                          if (states['sensor.temp_humidite_13_cave_vin_temperature'].state < 10)
                            return 'dodgerblue';
                          if (states['sensor.temp_humidite_13_cave_vin_temperature'].state > 20)
                            return 'red';
                         return 'grey';
                        ]]]
            custom_fields:
              humidite: >
                [[[ return
                (states['sensor.temp_humidite_13_cave_vin_humidity'].state) +
                "%"; ]]]
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                entities:
                  - sensor.temp_humidite_13_cave_vin_temperature
                line_color: blue
                line_width: 8
                font_size: 75
              - type: custom:mini-graph-card
                entities:
                  - sensor.temp_humidite_13_cave_vin_humidity
                line_color: '#e74c3c'
                line_width: 8
                font_size: 75
          - type: horizontal-stack
            cards:
              - type: tile
                entity: binary_sensor.capteur_ouverture_12_cave_vin_contact
                name: porte
              - type: tile
                entity: light.rubanled_01_cave
                name: ruban
                icon: mdi:led-strip-variant
              - type: tile
                entity: light.spots_cave_a_vin
                icon: hue:floor-spot-group
                name: spots
              - type: tile
                show_entity_picture: false
                vertical: false
                name: lampe
                entity: light.prise_10_cave_l1
          - type: entities
            entities:
              - entity: sensor.cellar_tracker_total_bottles
                name: Nombre de bouteilles
                secondary_info: last-updated
          - type: custom:flex-table-card
            title: Répartion par type
            entities:
              include: sensor.cellar_tracker_type*
            columns:
              - name: Type
                data: sub_type
              - name: Nombre
                data: count
                modify: parseFloat(x)
              - name: Pourcentage
                data: '%'
                modify: parseFloat(x).toFixed(0)
                suffix: '%'
            sort_by: count-
  - theme: Backend-selected
    title: Jardin
    path: jardin
    icon: mdi:grill
    subview: true
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:vertical-stack-in-card
            style: |
              ha-card { 
                border-radius: 20px !important;
                border-color: rgba(12, 12, 14, 0.2);
                border-style: outset;
                border-width: 1px;
              }
            cards:
              - type: custom:decluttering-card
                template: header_temperature_graph
              - type: custom:decluttering-card
                template: header_main
              - type: custom:meteofrance-weather-card
                entity: weather.maison
                number_of_forecasts: '5'
                hourly_forecast: false
                one_hour_forecast: false
                daily_forecast: true
                wind_forecast_icons: false
                details: false
                alert_forecast: false
                humidity_forecast: false
                animated_icons: true
                current: false
          - type: grid
            cards:
              - type: gauge
                entity: sensor.pluie_aujourdhui
                min: 0
                max: 20
                severity:
                  green: 5
                  yellow: 10
                  red: 15
                name: Jour
                style: |
                  ha-card {
                    margin: 5px -15px -30px 1px;
                  }
              - type: gauge
                entity: sensor.pluie_semaine
                min: 0
                max: 50
                severity:
                  green: 10
                  yellow: 20
                  red: 40
                name: Semaine
                style: |
                  ha-card {
                    margin: 5px -15px -30px -13px;
                  }
              - type: gauge
                entity: sensor.pluie_mois
                min: 0
                max: 125
                severity:
                  green: 40
                  yellow: 80
                  red: 110
                name: Mois
                style: |
                  ha-card {
                    margin: 5px -15px -30px -13px;
                  }
              - type: gauge
                entity: sensor.pluie_annee
                min: 0
                max: 1000
                severity:
                  green: 200
                  yellow: 400
                  red: 800
                name: Année
                style: |
                  ha-card {
                    margin: 5px 1px -30px -13px;
                  }
            columns: 4
            square: false
          - cards:
              - aspect_ratio: 33%
                entity: automation.arrosage_potager
                name: Irrigation
                state_image:
                  'off': /local/images/background/irrigation_potager.jpg
                  'on': /local/images/background/irrigation_potager.jpg
                type: picture-entity
              - type: conditional
                conditions:
                  - condition: state
                    entity: automation.arrosage_potager
                    state: 'on'
                card:
                  cards:
                    - type: custom:stack-in-card
                      mode: vertical
                      keep:
                        box_shadow: false
                        margin: false
                        border_radius: false
                        background: false
                        outer_padding: false
                      cards:
                        - type: custom:mod-card
                          card_mod:
                            style:
                              .: |
                                :host {
                                  --text-divider-color: rgb(68, 115, 158);
                                  --text-divider-line-size: 1px;
                                }
                          card:
                            type: custom:text-divider-row
                            text: SÉCHERESSE
                            align: left
                        - type: custom:mod-card
                          card_mod:
                            style: |
                              ha-card {
                                margin: -15px -5px 0px -5px;
                              }  
                          card:
                            type: horizontal-stack
                            cards:
                              - type: custom:bar-card
                                entities:
                                  - entity: sensor.maison
                                    name: Niveau
                                    icon: mdi:alert-circle
                                    height: 47px
                                    color: red
                                    positions:
                                      indicator: 'off'
                                      icon: 'off'
                                    severity:
                                      - text: Vigilance
                                        color: green
                                      - text: Alerte
                                        color: orange
                                      - text: Alerte renforcée
                                        color: orange
                                      - text: Crise
                                        color: red
                                card_mod:
                                  style: >
                                    bar-card-currentbar, bar-card-backgroundbar
                                    {
                                      border-radius: 25px;
                                    }

                                    #states > bar-card-row > bar-card-card >
                                    bar-card-background > bar-card-contentbar >
                                    bar-card-name {
                                      font-size: 16px;
                                    }  ha-card {
                                      margin-top: -2px;
                                      background: none;
                                      border: none;
                                    }
                              - type: custom:button-card
                                entity: >-
                                  sensor.arrosage_des_jardins_potagers_restrictions_maison
                                color_type: icon
                                aspect_ratio: 1/1
                                show_name: true
                                show_state: true
                                name: |
                                  [[[
                                    return entity.attributes.friendly_name
                                  ]]]
                                styles:
                                  card:
                                    - '--mdc-ripple-color': rgb(68, 115, 158)
                                    - '--mdc-ripple-press-opacity': 0.5
                                    - border-radius: 8px
                                  name:
                                    - font-size: 11px
                                    - white-space: normal
                                  state:
                                    - font-weight: bold
                                    - font-size: 10px
                                    - white-space: normal
                                state:
                                  - value: Aucune restriction
                                    operator: '=='
                                    color: green
                                    styles:
                                      card:
                                        - box-shadow: 0px 0px 0px 2px green
                                      state:
                                        - color: green
                                  - value: Interdiction sauf exception
                                    operator: '=='
                                    color: orange
                                    styles:
                                      card:
                                        - box-shadow: 0px 0px 0px 2px orange
                                      state:
                                        - color: orange
                                  - value: Interdiction
                                    operator: '=='
                                    color: red
                                    styles:
                                      card:
                                        - box-shadow: 0px 0px 0px 2px red
                                      state:
                                        - color: red
                                  - value: Interdiction sur plage horaire
                                    operator: '=='
                                    color: orange
                                    styles:
                                      card:
                                        - box-shadow: 0px 0px 0px 2px orange
                                      state:
                                        - color: orange
                                size: 50%
                              - type: custom:button-card
                                entity: >-
                                  sensor.maison
                                color_type: icon
                                aspect_ratio: 1/1
                                show_name: true
                                show_state: true
                                name: |
                                  [[[
                                    return entity.attributes.friendly_name
                                  ]]]
                                styles:
                                  card:
                                    - '--mdc-ripple-color': rgb(68, 115, 158)
                                    - '--mdc-ripple-press-opacity': 0.5
                                    - border-radius: 8px
                                  name:
                                    - font-size: 11px
                                    - white-space: normal
                                  state:
                                    - font-weight: bold
                                    - font-size: 10px
                                    - white-space: normal
                                state:
                                  - value: Aucune restriction
                                    operator: '=='
                                    color: green
                                    styles:
                                      card:
                                        - box-shadow: 0px 0px 0px 2px green
                                      state:
                                        - color: green
                                  - value: Interdiction sauf exception
                                    operator: '=='
                                    color: orange
                                    styles:
                                      card:
                                        - box-shadow: 0px 0px 0px 2px orange
                                      state:
                                        - color: orange
                                  - value: Interdiction
                                    operator: '=='
                                    color: red
                                    styles:
                                      card:
                                        - box-shadow: 0px 0px 0px 2px red
                                      state:
                                        - color: red
                                  - value: Interdiction sur plage horaire
                                    operator: '=='
                                    color: orange
                                    styles:
                                      card:
                                        - box-shadow: 0px 0px 0px 2px orange
                                      state:
                                        - color: orange
                                size: 50%
                    - type: custom:button-card
                      styles:
                        card:
                          - height: 120px
                        custom_fields:
                          bouton:
                            - position: absolute
                            - top: 40%
                            - left: 50%
                            - width: calc(98% + 0px)
                            - transform: translate(-50%, calc(-50% + 10px))
                            - '--ha-card-border-width': 0px
                      custom_fields:
                        bouton:
                          card:
                            square: false
                            columns: 4
                            type: grid
                            cards:
                              - type: custom:button-card
                                entity: sensor.miflora_potager_soil_moisture
                                name: humidité du sol
                                units: '%'
                                template:
                                  - carte_jauge
                                  - state_unavailable
                                styles:
                                  name:
                                    - font-size: 12px
                                  state:
                                    - font-size: 16px
                                  custom_fields:
                                    gauge:
                                      - width: calc(125% + 0px)
                                custom_fields:
                                  gauge:
                                    card:
                                      entity: sensor.miflora_potager_soil_moisture
                                      gauge:
                                        max_value: 100
                                        min_value: 0
                                        severity:
                                          - color: rgb(180, 70, 70)
                                            from: 0
                                            to: 20
                                          - color: rgb(54, 166, 65)
                                            from: 20.1
                                            to: 30
                                          - color: rgb(54, 166, 65)
                                            from: 30.1
                                            to: 100
                              - type: custom:button-card
                                entity: sensor.precipitation_prevision
                                name: prévision
                                units: mm
                                template:
                                  - carte_jauge
                                  - state_unavailable
                                styles:
                                  name:
                                    - font-size: 14px
                                  state:
                                    - font-size: 16px
                                  custom_fields:
                                    gauge:
                                      - width: calc(125% + 0px)
                                custom_fields:
                                  gauge:
                                    card:
                                      entity: sensor.precipitation_prevision
                                      gauge:
                                        max_value: 20
                                        min_value: 0
                                        severity:
                                          - color: rgb(180, 70, 70)
                                            from: 0
                                            to: 5
                                          - color: rgb(54, 166, 65)
                                            from: 5.1
                                            to: 20
                              - type: custom:button-card
                                entity: sensor.precipitation_previsionnelle
                                name: ☔️
                                units: mm
                                template:
                                  - carte_jauge
                                  - state_unavailable
                                styles:
                                  name:
                                    - font-size: 20px
                                  state:
                                    - font-size: 16px
                                  custom_fields:
                                    gauge:
                                      - width: calc(115% + 0px)
                                custom_fields:
                                  gauge:
                                    card:
                                      entity: sensor.precipitation_previsionnelle
                                      gauge:
                                        max_value: 25
                                        min_value: 0
                                        severity:
                                          - color: rgb(180, 70, 70)
                                            from: 0
                                            to: 8
                                          - color: rgb(54, 166, 65)
                                            from: 8.1
                                            to: 25
                              - type: custom:button-card
                                entity: >-
                                  sensor.nombre_de_jours_depuis_dernier_arrosage_potager
                                name: dernier arrosage
                                units: jours
                                template:
                                  - carte_jauge
                                  - state_unavailable
                                styles:
                                  name:
                                    - font-size: 12px
                                  state:
                                    - font-size: 16px
                                  custom_fields:
                                    gauge:
                                      - width: calc(125% + 0px)
                                custom_fields:
                                  gauge:
                                    card:
                                      entity: >-
                                        sensor.nombre_de_jours_depuis_dernier_arrosage_potager
                                      gauge:
                                        max_value: 10
                                        min_value: 0
                                        severity:
                                          - color: rgb(54, 166, 65)
                                            from: 0
                                            to: 3
                                          - color: rgb(180, 70, 70)
                                            from: 3.1
                                            to: 20
                    - show_name: true
                      show_icon: true
                      show_state: true
                      entities:
                        - entity: switch.arrosage_potager
                          icon: mdi:sprinkler-variant
                          name: Potager
                        - entity: switch.arrosage_pelouse
                          icon: mdi:sprinkler-variant
                          name: Jardin
                        - entity: switch.arrosage_allee
                          icon: mdi:sprinkler-variant
                          name: Allée
                      type: glance
                      columns: 3
                      state_color: false
                  type: custom:stack-in-card
                  mode: vertical
            type: custom:stack-in-card
            mode: vertical
          - type: horizontal-stack
            cards:
              - type: tile
                entity: light.prise_guirlande
                name: guirlande
                icon: mdi:led-strip-variant
              - type: tile
                entity: light.spots_facade_avant
                icon: hue:bulb-group-spot-hung
                name: facade avant
                color: red
          - type: horizontal-stack
            cards:
              - type: tile
                entity: binary_sensor.entree_motion
                name: Entrée
              - type: tile
                entity: binary_sensor.jardin_person_detected
                name: Jardin
          - type: horizontal-stack
            cards:
              - type: entity
                entity: sensor.miflora_potager_temperature
              - type: entity
                entity: sensor.miflora_potager_soil_moisture
  - theme: Backend-selected
    title: alarme
    path: alarme
    icon: mdi:alarm-light-outline
    subview: true
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: alarm-panel
            states:
              - arm_away
              - arm_home
            entity: alarm_control_panel.rdc
            name: Alarme
          - type: horizontal-stack
            cards:
              - type: tile
                entity: person.thomas
              - type: tile
                entity: Delphine
          - type: horizontal-stack
            cards:
              - type: tile
                entity: alarm_control_panel.eufy_base
                name: Caméras extérieures
              - type: tile
                entity: switch.heiman_siren
                icon: mdi:alarm-light
                vertical: false
                name: Sirène
          - type: horizontal-stack
            cards:
              - show_state: false
                show_name: false
                camera_view: auto
                type: picture-entity
                entity: camera.ma_camera_netatmo_salon
              - show_state: false
                show_name: false
                camera_view: auto
                type: picture-entity
                entity: camera.c1c_d91303452
          - type: horizontal-stack
            cards:
              - show_state: false
                show_name: false
                camera_view: auto
                type: picture-entity
                entity: camera.netatmo_presence
              - show_state: false
                show_name: false
                camera_view: auto
                type: picture-entity
                entity: camera.entree_high
          - type: horizontal-stack
            cards:
              - show_state: false
                show_name: false
                camera_view: auto
                type: picture-entity
                entity: camera.jardin
              - show_state: false
                show_name: false
                camera_view: auto
                type: picture-entity
                entity: camera.arriere_cour
          - show_state: false
            show_name: false
            camera_view: auto
            type: picture-entity
            entity: camera.fe_p_sub
  - title: fermetures
    path: fermetures
    icon: mdi:door-open
    subview: true
    badges: []
    cards:
      - type: entities
        entities:
          - type: custom:paper-buttons-row
            buttons:
              - icon: mdi:window-closed-variant
                layout: icon|name
                name: Fenêtre
                style:
                  name:
                    filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.5))
                    margin-left: 18px
                    font-size: 15px
                    font-weight: 600
                    color: var(--title)
                  icon:
                    filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.5))
                    '--mdc-icon-size': 20px
                    color: var(--title)
              - icon: mdi:close
                layout: icon
                tap_action:
                  action: navigate
                  navigation_path: /
                style:
                  icon:
                    '--mdc-icon-size': 15px
            style: |
              div.flex-box {
                margin-top: -6px;
                display: flex;
                justify-content: space-between;
                align-items: center;
              }
          - type: custom:vertical-stack-in-card
            horizontal: true
            style: |
              ha-card { 
                background-color: var(--card-background-color);
                border-radius: var(--ha-card-border-radius) !important;
                box-shadow: none;
              }   
            cards:
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.capteur_ouverture_02_salon_door_state
                    name: Salon
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.capteur_ouverture_13_cuisine_contact
                    name: Cuisine
          - type: custom:vertical-stack-in-card
            horizontal: true
            style: |
              ha-card { 
                background-color: var(--card-background-color);
                padding: 2px;
                box-shadow: none;
              }   
            cards:
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.capteur_ouverture_01_sam_door_state
                    name: Salle à manger
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.capteur_ouverture_11_salon_contact
                    name: Salle à manger
          - type: custom:vertical-stack-in-card
            horizontal: true
            style: |
              ha-card { 
                background-color: var(--card-background-color);
                padding: 2px;
                box-shadow: none;
              }   
            cards:
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.capteur_ouverture_09_salle_de_jeux_contact
                    name: Salle de jeux
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.capteur_ouverture_10_bureau_contact
                    name: Bureau
          - type: custom:vertical-stack-in-card
            horizontal: true
            style: |
              ha-card { 
                background-color: var(--card-background-color);
                padding: 2px;
                box-shadow: none;
              }   
            cards:
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    name: Parents Velux
                    entity: binary_sensor.capteur_ouverture_06_parents_velux_contact
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    name: Parents fenêtre
                    entity: binary_sensor.capteur_ouverture_10_bureau_contact
          - type: custom:vertical-stack-in-card
            horizontal: true
            style: |
              ha-card { 
                background-color: var(--card-background-color);
                padding: 2px;
                box-shadow: none;
              }   
            cards:
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.capteur_ouverture_03_chloe_door_state
                    name: Chloé
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.capteur_ouverture_04_maxence_door_state
                    name: Maxence
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.capteur_ouverture_100_enfants_porte
                    name: Fenêtre
      - type: entities
        entities:
          - type: custom:paper-buttons-row
            buttons:
              - icon: mdi:lock
                layout: icon|name
                name: Serrures
                style:
                  name:
                    filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.5))
                    margin-left: 18px
                    font-size: 15px
                    font-weight: 600
                    color: var(--title)
                  icon:
                    filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.5))
                    '--mdc-icon-size': 20px
                    color: var(--title)
              - icon: mdi:close
                layout: icon
                tap_action:
                  action: navigate
                  navigation_path: /
                style:
                  icon:
                    '--mdc-icon-size': 15px
            style: |
              div.flex-box {
                margin-top: -6px;
                display: flex;
                justify-content: space-between;
                align-items: center;
              }
          - type: custom:vertical-stack-in-card
            horizontal: true
            style: |
              ha-card { 
                background-color: var(--card-background-color);
                border-radius: var(--ha-card-border-radius) !important;
                box-shadow: none;
              }   
            cards:
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: lock.smart_lock_pro
                    name: Entrée
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: cover.garage
                    name: Garage
          - type: custom:paper-buttons-row
            buttons:
              - icon: mdi:lock
                layout: icon|name
                name: Portes
                style:
                  name:
                    filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.5))
                    margin-left: 18px
                    font-size: 15px
                    font-weight: 600
                    color: var(--title)
                  icon:
                    filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.5))
                    '--mdc-icon-size': 20px
                    color: var(--title)
              - icon: mdi:close
                layout: icon
                tap_action:
                  action: navigate
                  navigation_path: /
                style:
                  icon:
                    '--mdc-icon-size': 15px
            style: |
              div.flex-box {
                margin-top: -6px;
                display: flex;
                justify-content: space-between;
                align-items: center;
              }
          - type: custom:vertical-stack-in-card
            horizontal: true
            style: |
              ha-card { 
                background-color: var(--card-background-color);
                padding: 2px;
                box-shadow: none;
              }   
            cards:
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: >-
                      binary_sensor.capteur_ouverture_07_porte_entree_door_state_simple
                    name: Entrée
          - type: custom:vertical-stack-in-card
            horizontal: true
            style: |
              ha-card { 
                background-color: var(--card-background-color);
                padding: 2px;
                box-shadow: none;
              }   
            cards:
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.capteur_ouverture_05_descente_garage_contact
                    name: Descente garage
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.capteur_ouverture_12_cave_vin_contact
                    name: Cave à vin
  - title: detection
    path: detection
    icon: mdi:run-fast
    subview: true
    badges: []
    cards:
      - type: entities
        entities:
          - type: custom:paper-buttons-row
            buttons:
              - icon: mdi:run
                layout: icon|name
                name: Présence
                style:
                  name:
                    filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.5))
                    margin-left: 18px
                    font-size: 15px
                    font-weight: 600
                    color: var(--title)
                  icon:
                    filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.5))
                    '--mdc-icon-size': 20px
                    color: var(--title)
              - icon: mdi:close
                layout: icon
                tap_action:
                  action: navigate
                  navigation_path: /
                style:
                  icon:
                    '--mdc-icon-size': 15px
            style: |
              div.flex-box {
                margin-top: -6px;
                display: flex;
                justify-content: space-between;
                align-items: center;
              }
          - type: custom:vertical-stack-in-card
            horizontal: true
            style: |
              ha-card { 
                background-color: var(--card-background-color);
                border-radius: var(--ha-card-border-radius) !important;
                box-shadow: none;
              }   
            cards:
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.mouvement_07_salon_occupancy
                    name: Salon
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.mouvement_06_salle_a_manger_occupancy
                    name: Salle à manger
          - type: custom:vertical-stack-in-card
            horizontal: true
            style: |
              ha-card { 
                background-color: var(--card-background-color);
                padding: 2px;
                box-shadow: none;
              }   
            cards:
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.mouvement_01_salle_de_jeux_occupancy
                    name: Salle de jeux
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.mouvement_08_bureau_presence
                    name: Bureau
          - type: custom:vertical-stack-in-card
            horizontal: true
            style: |
              ha-card { 
                background-color: var(--card-background-color);
                padding: 2px;
                box-shadow: none;
              }   
            cards:
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.mouvement_05_cuisine_occupancy
                    name: Cuisine
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.mouvement_09_wc_occupancy
                    name: WC
          - type: custom:vertical-stack-in-card
            horizontal: true
            style: |
              ha-card { 
                background-color: var(--card-background-color);
                padding: 2px;
                box-shadow: none;
              }   
            cards:
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.mouvement_04_cave_a_vin_motion_sensor_status
                    name: Buanderie
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.mouvement_04_cave_a_vin_motion_sensor_status
                    name: Cellier
          - type: custom:vertical-stack-in-card
            horizontal: true
            style: |
              ha-card { 
                background-color: var(--card-background-color);
                padding: 2px;
                box-shadow: none;
              }   
            cards:
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.entree_motion
                    name: Entrée
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.fe_p_mouvement
                    name: Garage
          - type: custom:vertical-stack-in-card
            horizontal: true
            style: |
              ha-card { 
                background-color: var(--card-background-color);
                padding: 2px;
                box-shadow: none;
              }   
            cards:
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.jardin_motion_detected
                    name: Jardin
              - type: custom:vertical-stack-in-card
                style: |
                  ha-card { 
                    margin: 2px;
                    border-radius: 50px !important;
                  }          
                cards:
                  - type: tile
                    entity: binary_sensor.arriere_cour_motion_detected
                    name: Arrière-cours
  - title: cartes non utilisees
    path: cartes-non-utilisees
    subview: true
    badges: []
    cards:
      - type: custom:pool-monitor-card
        temperature: sensor.temp_humidite_10_piscine_temperature
        pH: input_number.ph
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: ''
                icon: '{{ state_attr(entity, ''icon'') }}'
                icon_color: |-
                  {% if states(entity) == 'Vert' %}
                   green
                  {% elif states(entity) == 'Jaune' %}
                   yellow
                  {% elif states(entity) == 'Orange' %}
                   orange
                  {% elif states(entity) == 'Rouge' %}
                   red
                  {% endif %}
                entity: sensor.alerte_neige_verglas
                secondary: Neige
                layout: vertical
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                tap_action:
                  action: more-info
              - type: custom:mushroom-template-card
                primary: ''
                icon: '{{ state_attr(entity, ''icon'') }}'
                icon_color: |-
                  {% if states(entity) == 'Vert' %}
                   green
                  {% elif states(entity) == 'Jaune' %}
                   yellow
                  {% elif states(entity) == 'Orange' %}
                   orange
                  {% elif states(entity) == 'Rouge' %}
                   red
                  {% endif %}
                entity: sensor.alerte_canicule
                secondary: Canicule
                layout: vertical
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                tap_action:
                  action: more-info
              - type: custom:mushroom-template-card
                primary: ''
                icon: '{{ state_attr(entity, ''icon'') }}'
                icon_color: |-
                  {% if states(entity) == 'Vert' %}
                   green
                  {% elif states(entity) == 'Jaune' %}
                   yellow
                  {% elif states(entity) == 'Orange' %}
                   orange
                  {% elif states(entity) == 'Rouge' %}
                   red
                  {% endif %}
                entity: sensor.alerte_grand_froid
                secondary: Grand Froid
                layout: vertical
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                tap_action:
                  action: more-info
              - type: custom:mushroom-template-card
                primary: ''
                icon: '{{ state_attr(entity, ''icon'') }}'
                icon_color: |-
                  {% if states(entity) == 'Vert' %}
                   green
                  {% elif states(entity) == 'Jaune' %}
                   yellow
                  {% elif states(entity) == 'Orange' %}
                   orange
                  {% elif states(entity) == 'Rouge' %}
                   red
                  {% endif %}
                entity: sensor.alerte_inondation
                secondary: Inondation
                layout: vertical
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                tap_action:
                  action: more-info
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: ''
                icon: '{{ state_attr(entity, ''icon'') }}'
                icon_color: |-
                  {% if states(entity) == 'Vert' %}
                   green
                  {% elif states(entity) == 'Jaune' %}
                   yellow
                  {% elif states(entity) == 'Orange' %}
                   orange
                  {% elif states(entity) == 'Rouge' %}
                   red
                  {% endif %}
                entity: sensor.alerte_vent_violent
                secondary: Vent violent
                layout: vertical
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                tap_action:
                  action: more-info
              - type: custom:mushroom-template-card
                primary: ''
                icon: '{{ state_attr(entity, ''icon'') }}'
                icon_color: |-
                  {% if states(entity) == 'Vert' %}
                   green
                  {% elif states(entity) == 'Jaune' %}
                   yellow
                  {% elif states(entity) == 'Orange' %}
                   orange
                  {% elif states(entity) == 'Rouge' %}
                   red
                  {% endif %}
                entity: sensor.alerte_pluie_inondation
                secondary: Pluie Inondation
                layout: vertical
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                tap_action:
                  action: more-info
              - type: custom:mushroom-template-card
                primary: ''
                icon: '{{ state_attr(entity, ''icon'') }}'
                icon_color: |-
                  {% if states(entity) == 'Vert' %}
                   green
                  {% elif states(entity) == 'Jaune' %}
                   yellow
                  {% elif states(entity) == 'Orange' %}
                   orange
                  {% elif states(entity) == 'Rouge' %}
                   red
                  {% endif %}
                entity: sensor.alerte_orages
                secondary: Orages
                layout: vertical
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                tap_action:
                  action: more-info
              - type: custom:mushroom-template-card
                primary: ''
                icon: '{{ state_attr(entity, ''icon'') }}'
                icon_color: |-
                  {% if states(entity) == 'Vert' %}
                   green
                  {% elif states(entity) == 'Jaune' %}
                   yellow
                  {% elif states(entity) == 'Orange' %}
                   orange
                  {% elif states(entity) == 'Rouge' %}
                   red
                  {% endif %}
                entity: sensor.alerte_meteo
                secondary: Météo
                layout: vertical
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                tap_action:
                  action: more-info
      - type: conditional
        conditions:
          - condition: state
            entity: automation.arrosage_potager
            state: 'on'
        card:
          cards:
            - type: custom:stack-in-card
              mode: vertical
              keep:
                box_shadow: false
                margin: false
                border_radius: false
                background: false
                outer_padding: false
              cards:
                - type: custom:mod-card
                  card_mod:
                    style:
                      .: |
                        :host {
                          --text-divider-color: rgb(68, 115, 158);
                          --text-divider-line-size: 1px;
                        }
                  card:
                    type: custom:text-divider-row
                    text: SÉCHERESSE
                    align: left
                - type: custom:mod-card
                  card_mod:
                    style: |
                      ha-card {
                        margin: -15px -5px 0px -5px;
                      }  
                  card:
                    type: horizontal-stack
                    cards:
                      - type: custom:bar-card
                        entities:
                          - entity: sensor.alert_level_in_maison
                            name: Niveau
                            icon: mdi:alert-circle
                            height: 47px
                            color: red
                            positions:
                              indicator: 'off'
                              icon: 'off'
                            severity:
                              - text: Vigilance
                                color: green
                              - text: Alerte
                                color: orange
                              - text: Alerte renforcée
                                color: orange
                              - text: Crise
                                color: red
                        card_mod:
                          style: >
                            bar-card-currentbar, bar-card-backgroundbar {
                              border-radius: 25px;
                            }

                            #states > bar-card-row > bar-card-card >
                            bar-card-background > bar-card-contentbar >
                            bar-card-name {
                              font-size: 16px;
                            }  ha-card {
                              margin-top: -2px;
                              background: none;
                              border: none;
                            }
                      - type: custom:button-card
                        entity: >-
                          sensor.arrosage_des_jardins_potagers_restrictions_maison
                        color_type: icon
                        aspect_ratio: 1/1
                        show_name: true
                        show_state: true
                        name: |
                          [[[
                            return entity.attributes.friendly_name
                          ]]]
                        styles:
                          card:
                            - '--mdc-ripple-color': rgb(68, 115, 158)
                            - '--mdc-ripple-press-opacity': 0.5
                            - border-radius: 8px
                          name:
                            - font-size: 11px
                            - white-space: normal
                          state:
                            - font-weight: bold
                            - font-size: 10px
                            - white-space: normal
                        state:
                          - value: Aucune restriction
                            operator: '=='
                            color: green
                            styles:
                              card:
                                - box-shadow: 0px 0px 0px 2px green
                              state:
                                - color: green
                          - value: Interdiction sauf exception
                            operator: '=='
                            color: orange
                            styles:
                              card:
                                - box-shadow: 0px 0px 0px 2px orange
                              state:
                                - color: orange
                          - value: Interdiction
                            operator: '=='
                            color: red
                            styles:
                              card:
                                - box-shadow: 0px 0px 0px 2px red
                              state:
                                - color: red
                          - value: Interdiction sur plage horaire
                            operator: '=='
                            color: orange
                            styles:
                              card:
                                - box-shadow: 0px 0px 0px 2px orange
                              state:
                                - color: orange
                        size: 50%
                      - type: custom:button-card
                        entity: sensor.arrosage_des_pelouses_restrictions_maison
                        color_type: icon
                        aspect_ratio: 1/1
                        show_name: true
                        show_state: true
                        name: |
                          [[[
                            return entity.attributes.friendly_name
                          ]]]
                        styles:
                          card:
                            - '--mdc-ripple-color': rgb(68, 115, 158)
                            - '--mdc-ripple-press-opacity': 0.5
                            - border-radius: 8px
                          name:
                            - font-size: 11px
                            - white-space: normal
                          state:
                            - font-weight: bold
                            - font-size: 10px
                            - white-space: normal
                        state:
                          - value: Aucune restriction
                            operator: '=='
                            color: green
                            styles:
                              card:
                                - box-shadow: 0px 0px 0px 2px green
                              state:
                                - color: green
                          - value: Interdiction sauf exception
                            operator: '=='
                            color: orange
                            styles:
                              card:
                                - box-shadow: 0px 0px 0px 2px orange
                              state:
                                - color: orange
                          - value: Interdiction
                            operator: '=='
                            color: red
                            styles:
                              card:
                                - box-shadow: 0px 0px 0px 2px red
                              state:
                                - color: red
                          - value: Interdiction sur plage horaire
                            operator: '=='
                            color: orange
                            styles:
                              card:
                                - box-shadow: 0px 0px 0px 2px orange
                              state:
                                - color: orange
                        size: 50%
            - type: custom:button-card
              styles:
                card:
                  - height: 120px
                custom_fields:
                  bouton:
                    - position: absolute
                    - top: 40%
                    - left: 50%
                    - width: calc(98% + 0px)
                    - transform: translate(-50%, calc(-50% + 10px))
                    - '--ha-card-border-width': 0px
              custom_fields:
                bouton:
                  card:
                    square: false
                    columns: 4
                    type: grid
                    cards:
                      - type: custom:button-card
                        entity: sensor.miflora_potager_soil_moisture
                        name: humidité du sol
                        units: '%'
                        template:
                          - carte_jauge
                          - state_unavailable
                        styles:
                          name:
                            - font-size: 12px
                          state:
                            - font-size: 16px
                          custom_fields:
                            gauge:
                              - width: calc(125% + 0px)
                        custom_fields:
                          gauge:
                            card:
                              entity: sensor.miflora_potager_soil_moisture
                              gauge:
                                max_value: 100
                                min_value: 0
                                severity:
                                  - color: rgb(180, 70, 70)
                                    from: 0
                                    to: 20
                                  - color: rgb(54, 166, 65)
                                    from: 20.1
                                    to: 30
                                  - color: rgb(54, 166, 65)
                                    from: 30.1
                                    to: 100
                      - type: custom:button-card
                        entity: sensor.precipitation_prevision
                        name: prévision
                        units: mm
                        template:
                          - carte_jauge
                          - state_unavailable
                        styles:
                          name:
                            - font-size: 14px
                          state:
                            - font-size: 16px
                          custom_fields:
                            gauge:
                              - width: calc(125% + 0px)
                        custom_fields:
                          gauge:
                            card:
                              entity: sensor.precipitation_prevision
                              gauge:
                                max_value: 20
                                min_value: 0
                                severity:
                                  - color: rgb(180, 70, 70)
                                    from: 0
                                    to: 5
                                  - color: rgb(54, 166, 65)
                                    from: 5.1
                                    to: 20
                      - type: custom:button-card
                        entity: sensor.precipitation_previsionnelle
                        name: ☔️
                        units: mm
                        template:
                          - carte_jauge
                          - state_unavailable
                        styles:
                          name:
                            - font-size: 20px
                          state:
                            - font-size: 16px
                          custom_fields:
                            gauge:
                              - width: calc(115% + 0px)
                        custom_fields:
                          gauge:
                            card:
                              entity: sensor.precipitation_previsionnelle
                              gauge:
                                max_value: 25
                                min_value: 0
                                severity:
                                  - color: rgb(180, 70, 70)
                                    from: 0
                                    to: 8
                                  - color: rgb(54, 166, 65)
                                    from: 8.1
                                    to: 25
                      - type: custom:button-card
                        entity: sensor.nombre_de_jours_depuis_dernier_arrosage_potager
                        name: dernier arrosage
                        units: jours
                        template:
                          - carte_jauge
                          - state_unavailable
                        styles:
                          name:
                            - font-size: 12px
                          state:
                            - font-size: 16px
                          custom_fields:
                            gauge:
                              - width: calc(125% + 0px)
                        custom_fields:
                          gauge:
                            card:
                              entity: >-
                                sensor.nombre_de_jours_depuis_dernier_arrosage_potager
                              gauge:
                                max_value: 10
                                min_value: 0
                                severity:
                                  - color: rgb(54, 166, 65)
                                    from: 0
                                    to: 3
                                  - color: rgb(180, 70, 70)
                                    from: 3.1
                                    to: 20
            - show_name: true
              show_icon: true
              show_state: true
              entities:
                - entity: switch.arrosage_potager
                  icon: mdi:sprinkler-variant
                  name: Potager
                - entity: switch.arrosage_pelouse
                  icon: mdi:sprinkler-variant
                  name: Jardin
                - entity: switch.arrosage_allee
                  icon: mdi:sprinkler-variant
                  name: Allée
              type: glance
              columns: 3
              state_color: false
          type: custom:stack-in-card
          mode: vertical
      - type: vertical-stack
        cards:
          - type: custom:flex-table-card
            title: Millésime
            entities:
              include: sensor.cellar_tracker_vintage*
            columns:
              - name: Millésime
                data: sub_type
                modify: >-
                  if(parseFloat(x).toFixed(0) == 1001) {"N.V."}
                  else{parseFloat(x).toFixed(0)}
              - name: Pourcentage
                data: '%'
                modify: parseFloat(x).toFixed(0)
                suffix: '%'
            sort_by: count-
          - type: custom:flex-table-card
            title: Cépages
            entities:
              include: sensor.cellar_tracker_varietal*
            columns:
              - name: Cépage
                data: sub_type
              - name: Pourcentage
                data: '%'
                modify: parseFloat(x).toFixed(0)
                suffix: '%'
            sort_by: count-
      - type: custom:mushroom-climate-card
        entity: climate.salon
        show_temperature_control: false
        secondary_info: last-updated
        hvac_modes:
          - heat
          - 'off'
        icon: mdi:radiator
      - type: custom:mushroom-climate-card
        entity: climate.chambre_enfants
        show_temperature_control: false
        secondary_info: last-updated
        hvac_modes:
          - heat
          - 'off'
        icon: mdi:radiator
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: NAS 418
                icon: mdi:nas
                entity: switch.nas_418
                icon_color: '{{ ''green'' if states(entity) == ''on'' else ''red'' }}'
                tap_action:
                  action: toggle
              - type: tile
                entity: binary_sensor.ds418j_etat_de_securite
              - type: tile
                entity: update.ds418j_mise_a_jour_dsm
          - type: horizontal-stack
            cards:
              - type: tile
                entity: sensor.ds418j_temperature
          - type: picture-elements
            elements:
              - type: state-icon
                entity: sensor.home_assistant_v2_db_size
                icon: mdi:database-check
                style:
                  top: 30%
                  left: 85%
              - type: state-label
                entity: sensor.home_assistant_v2_db_size
                prefix: 'DB: '
                style:
                  top: 40%
                  left: 85%
              - type: state-icon
                icon: mdi:home-assistant
                entity: sensor.docker_hub
                style:
                  top: 30%
                  left: 20%
              - type: state-label
                entity: sensor.docker_hub
                prefix: 'Dispo: '
                style:
                  top: 40%
                  left: 20%
              - type: state-label
                entity: sensor.current_version
                prefix: 'Installée: '
                style:
                  top: 48%
                  left: 20%
              - type: state-icon
                icon: hacs:hacs
                entity: sensor.hacs
                style:
                  top: 30%
                  left: 53%
              - type: state-label
                entity: sensor.hacs
                style:
                  top: 40%
                  left: 53%
              - type: state-badge
                entity: sensor.all_door_available
                style:
                  top: 75%
                  left: 20%
              - type: state-badge
                entity: sensor.all_lights_available
                style:
                  top: 75%
                  left: 40%
              - type: state-badge
                entity: sensor.all_temp_available
                style:
                  top: 75%
                  left: 60%
              - type: state-badge
                entity: sensor.all_move_available
                style:
                  top: 75%
                  left: 80%
            image: /local/images/home_assistant.png
          - type: picture-elements
            image: /local/images/docker2.png
            elements:
              - type: state-label
                entity: sensor.docker_containers_running
                prefix: 'Nombre de conteneurs: '
                style:
                  top: 25%
                  left: 25%
                  color: black
              - type: state-icon
                entity: sensor.docker_containers_running
                style:
                  top: 20%
                  left: 25%
              - type: state-label
                entity: sensor.docker_version
                prefix: 'Version installée: '
                style:
                  top: 12%
                  left: 25%
                  color: black
              - type: state-icon
                entity: sensor.docker_version
                style:
                  top: 07%
                  left: 25%
              - type: state-label
                entity: sensor.docker_homeassistant_state
                style:
                  top: 47%
                  left: 15%
                  color: black
              - type: image
                entity: sensor.docker_homeassistant_state
                image: /local/lovelace/icons/ha.png
                style:
                  top: 40%
                  left: 15%
                  width: 6%
              - type: state-label
                entity: sensor.docker_portainer_state
                style:
                  top: 87%
                  left: 15%
                  color: black
              - type: image
                entity: sensor.docker_portainer_state
                image: /local/lovelace/icons/portainer.png
                style:
                  top: 80%
                  left: 15%
                  width: 6%
              - type: state-label
                entity: sensor.docker_zigbee2mqtt_state
                style:
                  top: 47%
                  left: 30%
                  color: black
              - type: image
                entity: sensor.docker_zigbee2mqtt_state
                image: /local/lovelace/icons/zigbee.png
                style:
                  top: 40%
                  left: 30%
                  width: 6%
              - type: state-label
                entity: sensor.docker_mqtt_state
                style:
                  top: 47%
                  left: 45%
                  color: black
              - type: image
                entity: sensor.docker_mqtt_state
                image: /local/lovelace/icons/mosquitto.png
                style:
                  top: 40%
                  left: 45%
                  width: 6%
              - type: state-label
                entity: sensor.docker_zwavejs2mqtt_state
                style:
                  top: 47%
                  left: 60%
                  color: black
              - type: image
                entity: sensor.docker_zwavejs2mqtt_state
                image: /local/lovelace/icons/zwave2mqtt.png
                style:
                  top: 40%
                  left: 60%
                  width: 6%
              - type: state-label
                entity: sensor.docker_node_red_state
                style:
                  top: 47%
                  left: 75%
                  color: black
              - type: image
                entity: sensor.docker_node_red_state
                image: /local/lovelace/icons/nodered.png
                style:
                  top: 40%
                  left: 75%
                  width: 6%
              - type: state-label
                entity: sensor.docker_adguardhome_state
                style:
                  top: 87%
                  left: 45%
                  color: black
              - type: image
                entity: sensor.docker_adguardhome_state
                image: /local/lovelace/icons/adguard.png
                style:
                  top: 80%
                  left: 45%
                  width: 6%
              - type: state-label
                entity: sensor.docker_traefik_state
                style:
                  top: 87%
                  left: 30%
                  color: black
              - type: image
                entity: sensor.docker_traefik_state
                image: /local/lovelace/icons/traefik.png
                style:
                  top: 80%
                  left: 30%
                  width: 6%
              - type: state-label
                entity: sensor.docker_influxdb_state
                style:
                  top: 67%
                  left: 15%
                  color: black
              - type: image
                entity: sensor.docker_influxdb_state
                image: /local/lovelace/icons/influxdb.png
                style:
                  top: 60%
                  left: 15%
                  width: 6%
              - type: state-label
                entity: sensor.docker_grafana_state
                style:
                  top: 67%
                  left: 30%
                  color: black
              - type: image
                entity: sensor.docker_grafana_state
                image: /local/lovelace/icons/grafana.png
                style:
                  top: 60%
                  left: 30%
                  width: 6%
              - type: state-label
                entity: sensor.docker_bitwarden_state
                style:
                  top: 87%
                  left: 75%
                  color: black
              - type: image
                entity: sensor.docker_bitwarden_state
                image: /local/lovelace/icons/bitwarden.png
                style:
                  top: 80%
                  left: 75%
                  width: 6%
              - type: state-label
                entity: sensor.docker_iobroker_state
                style:
                  top: 67%
                  left: 45%
                  color: black
              - type: image
                entity: sensor.docker_iobroker_state
                image: /local/lovelace/icons/iobroker.png
                style:
                  top: 60%
                  left: 45%
                  width: 6%
              - type: state-label
                entity: sensor.docker_heimdall_state
                style:
                  top: 67%
                  left: 75%
                  color: black
              - type: image
                entity: sensor.docker_heimdall_state
                image: /local/lovelace/icons/heimdall.png
                style:
                  top: 60%
                  left: 75%
                  width: 6%
            style: |
              ha-card {
              background-color: rgba(50,50,50,0.5); /*DARKGRAY*/
              border: 1px solid rgba(245,245,245,0.2); /*GRAY*/
              border-radius: 10px;
              }
      - type: markdown
        content: >-
          ![Unifi Logo](/local/images/ubiquiti-networks.png).



          <font color="#03A9F4"> <ha-icon
          icon="phu:ubiquiti-logo"></ha-icon></font> <a
          href="https://semnoz.home" target="_blank">Unifi Controler</a> 
      - type: entities
        entities:
          - entity: sensor.temp_humidite_06_bureau_co2
            name: Dioxyde de carbone
          - entity: sensor.temp_humidite_06_bureau_humidity
            name: Humidité
          - entity: sensor.temp_humidite_06_bureau_temperature
            name: Température
        title: temp_humidite_06_bureau
      - type: entities
        entities:
          - entity: sensor.temp_humidite_16_bureau_humidity
            name: Humidité
          - entity: sensor.temp_humidite_16_bureau_pm25
            name: PM2.5
          - entity: sensor.temp_humidite_16_bureau_temperature
            name: Température
          - entity: sensor.temp_humidite_16_bureau_voc_index
            name: VOC index
        title: temp_humidite_16_bureau
      - type: vertical-stack
        cards:
          - type: markdown
            content: "![Freebox Logo](/local/images/freebox-logo.png)\n\n\n<table>\n    <tbody>\n      <tr>\n        <td><b>IPv4 :</b> </td>\n        <td>{{ states.device_tracker.freebox_server_r2.attributes['IPv4'] -}}</td>\n\t  <tr>\n       <td><b>IPv6 : </b></td>\n        <td>{{ states.device_tracker.freebox_server_r2.attributes['IPv6'] -}}</td>\n      </tr>\n\t  <tr>\n       <td><b>Connexion : </b></td>\n        <td>{{ states.device_tracker.freebox_server_r2.attributes['connection_type'] -}}</td>\n      </tr>\n\t  <tr>\n       <td><b>Uptime : </b></td>\n        <td>{{ states.device_tracker.freebox_server_r2.attributes['uptime'] -}}</td>\n      </tr>\n\t  <tr>\n       <td><b>Firmware : </b></td>\n        <td>{{ states.device_tracker.freebox_server_r2.attributes['firmware_version'] -}}</td>\n      </tr>\n\t  <tr>\n       <td><b>Serial : </b></td>\n        <td>{{ states.device_tracker.freebox_server_r2.attributes['serial'] -}}</td>\n      </tr>\n\t  <tr>\n       <td><b>Bandwidth DL : </b></td>\n        <td>{{ states.sensor.myfreebox.attributes['bandwidth_down'] }}  Mb/s</td>\n      </tr>\n\t  <tr>\n       <td><b>Bandwidth UP : </b></td>\n        <td>{{ states.sensor.myfreebox.attributes['bandwidth_up'] }}  Mb/s</td>\n      </tr>\n\t  <tr>\n       <td><b>Chaîne TV : </b></td>\n        <td>{{ states.sensor.myfreeboxplayer_1.attributes['channel'] -}}</td>\n      </tr>\n    </tbody>\n  </table>\n  "
          - type: markdown
            content: >-
              ![Logo chaine](/local/pics/freeboxlogochaines/{{
              states.sensor.myfreeboxplayer_1.attributes['channel'] -}}.png)
            title: Chaîne en cours
          - type: custom:mini-graph-card
            name: Débit Freebox
            entities:
              - entity: sensor.freebox_download_speed
                color: '#5282F7'
                name: Download
              - entity: sensor.freebox_upload_speed
                color: red
                name: Upload
              - entity: binary_sensor.night
                color: '#6f7480'
                y_axis: secondary
                name: Nuit
                aggregate_func: min
                smoothing: false
                show_state: true
                show_line: false
                show_points: false
            state_map:
              - value: 'off'
                label: Jour
              - value: 'on'
                label: Nuit
            hours_to_show: 72
            line_width: 3
            card_mod:
              style: |
                ha-card {
                  --paper-item-icon-color: red;
                }
          - type: custom:bar-card
            entities:
              - entity: sensor.disque_dur_free_space
                icon: mdi:harddisk
            color: red
            card_mod:
              style: |
                bar-card-current, bar-card-backgroundbar {
                  border-radius: 8px;
                }
                ha-card {
                  --paper-item-icon-color: red;
                }
          - type: horizontal-stack
            cards:
              - type: vertical-stack
                cards:
                  - type: gauge
                    entity: sensor.freebox_temperature_switch
                    name: T°C Switch
                    needle: false
                    severity:
                      green: 0
                      yellow: 0
                      red: 0
                  - type: gauge
                    entity: sensor.freebox_disque_dur
                    name: T°C Disque
                    needle: false
                    severity:
                      green: 0
                      yellow: 0
                      red: 0
              - type: vertical-stack
                cards:
                  - type: gauge
                    entity: sensor.freebox_temperature_cpu_a
                    name: T°C CPU A
                    needle: false
                    severity:
                      green: 0
                      yellow: 0
                      red: 0
                  - type: gauge
                    entity: sensor.freebox_temperature_cpu_b
                    name: T°C CPU B
                    needle: false
                    severity:
                      green: 0
                      yellow: 0
                      red: 0
      - type: custom:stack-in-card
        mode: vertical
        cards:
          - type: entities
            entities:
              - entity: sensor.dcp_l3550cdw_status
                name: Status
              - entity: sensor.dcp_l3550cdw_uptime
            title: DCP-L3550CDW
          - type: custom:button-card
            styles:
              card:
                - height: 120px
              custom_fields:
                bouton:
                  - position: absolute
                  - top: 40%
                  - left: 50%
                  - width: calc(98% + 0px)
                  - transform: translate(-50%, calc(-50% + 10px))
                  - '--ha-card-border-width': 0px
            custom_fields:
              bouton:
                card:
                  square: false
                  columns: 4
                  type: grid
                  cards:
                    - type: custom:button-card
                      entity: sensor.dcp_l3550cdw_black_toner_remaining
                      name: Noir
                      units: '%'
                      template:
                        - carte_jauge
                        - state_unavailable
                      styles:
                        name:
                          - font-size: 16px
                        state:
                          - font-size: 16px
                        custom_fields:
                          gauge:
                            - width: calc(125% + 0px)
                      custom_fields:
                        gauge:
                          card:
                            entity: sensor.dcp_l3550cdw_black_toner_remaining
                            gauge:
                              max_value: 100
                              min_value: 0
                              severity:
                                - color: rgb(247, 47, 47)
                                  from: 0
                                  to: 20
                                - color: rgb(247, 146, 47)
                                  from: 21
                                  to: 40
                                - color: rgb(35, 141, 45)
                                  from: 41
                                  to: 100
                    - type: custom:button-card
                      entity: sensor.dcp_l3550cdw_cyan_toner_remaining
                      name: Cyan
                      units: '%'
                      template:
                        - carte_jauge
                        - state_unavailable
                      styles:
                        name:
                          - font-size: 16px
                        state:
                          - font-size: 16px
                        custom_fields:
                          gauge:
                            - width: calc(125% + 0px)
                      custom_fields:
                        gauge:
                          card:
                            entity: sensor.dcp_l3550cdw_cyan_toner_remaining
                            gauge:
                              max_value: 100
                              min_value: 0
                              severity:
                                - color: rgb(247, 47, 47)
                                  from: 0
                                  to: 20
                                - color: rgb(247, 146, 47)
                                  from: 21
                                  to: 40
                                - color: rgb(35, 141, 45)
                                  from: 41
                                  to: 100
                    - type: custom:button-card
                      entity: sensor.dcp_l3550cdw_magenta_toner_remaining
                      name: Magenta
                      units: '%'
                      template:
                        - carte_jauge
                        - state_unavailable
                      styles:
                        name:
                          - font-size: 16px
                        state:
                          - font-size: 16px
                        custom_fields:
                          gauge:
                            - width: calc(125% + 0px)
                      custom_fields:
                        gauge:
                          card:
                            entity: sensor.dcp_l3550cdw_magenta_toner_remaining
                            gauge:
                              max_value: 100
                              min_value: 0
                              severity:
                                - color: rgb(247, 47, 47)
                                  from: 0
                                  to: 20
                                - color: rgb(247, 146, 47)
                                  from: 21
                                  to: 40
                                - color: rgb(35, 141, 45)
                                  from: 41
                                  to: 100
                    - type: custom:button-card
                      entity: sensor.dcp_l3550cdw_yellow_toner_remaining
                      name: Jaune
                      units: '%'
                      template:
                        - carte_jauge
                        - state_unavailable
                      styles:
                        name:
                          - font-size: 16px
                        state:
                          - font-size: 16px
                        custom_fields:
                          gauge:
                            - width: calc(125% + 0px)
                      custom_fields:
                        gauge:
                          card:
                            entity: sensor.dcp_l3550cdw_yellow_toner_remaining
                            gauge:
                              max_value: 100
                              min_value: 0
                              severity:
                                - color: rgb(247, 47, 47)
                                  from: 0
                                  to: 20
                                - color: rgb(247, 146, 47)
                                  from: 21
                                  to: 40
                                - color: rgb(35, 141, 45)
                                  from: 41
                                  to: 100
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            entity: sensor.devices_with_low_battery
            icon_color: red
            icon: mdi:battery-alert
            content: '{{ states(entity) }}'
            tap_action:
              action: fire-dom-event
              browser_mod:
                service: browser_mod.popup
                data:
                  title: Batterie faibe
                  content:
                    type: custom:auto-entities
                    filter:
                      include:
                        - attributes:
                            device_class: battery
                          state: < 30
                          options:
                            type: custom:mushroom-template-card
                            primary: '{{ states(entity) }}%'
                            secondary: '{{ state_attr(entity, ''friendly_name'') | title }}'
                            icon: >
                              {% set battery_level = (states(entity) | int / 10)
                              | round(0) | int * 10 %} {% if battery_level ==
                              100 %}
                                mdi:battery
                              {% elif battery_level > 0 %}
                                mdi:battery-{{ battery_level }}
                              {% else %}
                                mdi:battery-outline
                              {% endif %}
                            icon_color: |-
                              {% set battery_level = states(entity) | int %}
                              {% if battery_level > 90 %} 
                                green
                              {% elif battery_level > 60 %}
                                light-green
                              {% elif battery_level > 50 %}
                                lime
                              {% elif battery_level > 40 %}
                                yellow
                              {% elif battery_level > 30 %}
                                amber
                              {% elif battery_level > 20 %}
                                orange
                              {% elif battery_level > 10 %}
                                deep-orange
                              {% else %}
                                red
                              {% endif %} 
                            layout: horizontal
                            tap_action:
                              action: none
                            badge_icon: |-
                              {% set battery_level = states(entity) | int %}
                              {% if battery_level < 10 %} 
                                mdi:exclamation-thick
                              {% endif %}
                            badge_color: red
                            card_mod:
                              style: |
                                ha-card {
                                  padding: 4px 12px !important;
                                }
                      exclude: null
                    show_empty: false
                    card:
                      type: custom:layout-card
                      cards: []
                      layout_type: masonry
                    sort:
                      method: friendly_name```
      - type: custom:stack-in-card
        mode: vertical
        keep:
          box_shadow: false
          margin: false
          border_radius: false
          background: true
          outer_padding: false
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:flex-horseshoe-card
                entities:
                  - entity: sensor.station_meteo_co2
                    icon: mdi:leaf
                    decimals: 0
                    area: qualité
                  - entity: sensor.netatmo_interieur_co2_texte
                    decimals: 0
                    area: qualité
                show:
                  horseshoe_style: colorstop
                layout:
                  states:
                    - id: 1
                      entity_index: 1
                      xpos: 50
                      ypos: 67
                      styles:
                        - font-size: 2.53em;
                  icons:
                    - id: 0
                      entity_index: 0
                      xpos: 50
                      ypos: 40
                      icon_size: 5
                horseshoe_scale:
                  min: 1
                  max: 2300
                  color: rgb(240,240,240)
                color_stops:
                  '0': rgb(45,209,96)
                  '1000': rgb(253,199,5)
                  '2000': rgb(255,64,56)
                card_mod:
                  style: |
                    ha-card {
                      #background: Snow;
                      border-radius: 0;
                      border:none;
                    }
                    .icon {
                      color: 
                        {% if states('sensor.station_meteo_co2') | int(0) >= 1400 %}
                          rgb(255,64,56);
                        {% elif states('sensor.station_meteo_co2') | int(0) >= 1150 %}
                          rgb(253,199,5);
                        {% elif states('sensor.station_meteo_co2') | int(0) >= 1 %}
                          rgb(45,209,96);
                        {% else %}
                          black;
                        {% endif %}
                    }
                    .state__value {
                      {% if is_state('sensor.netatmo_interieur_co2_texte','Mauvais') %} 
                        fill: rgb(255,64,56) !important;
                      {% elif is_state('sensor.netatmo_interieur_co2_texte','Malsain') %} 
                        fill: rgb(255,64,56) !important;
                      {% elif is_state('sensor.netatmo_interieur_co2_texte','Bon') %}
                        fill: rgb(45,209,96) !important;
                      {% elif is_state('sensor.netatmo_interieur_co2_texte','Acceptable') %}
                        fill: rgb(253,199,5) !important;
                      {% elif is_state('sensor.netatmo_interieur_co2_texte','Excellent') %}
                        fill: rgb(45,209,96) !important;
                      {% else %}
                        fill: white !important;
                      {% endif %}
                    }
                    }
              - type: vertical-stack
                cards:
                  - type: custom:button-card
                    entity: sensor.station_meteo_temperature
                    layout: icon_state
                    aspect_ratio: 1.8/1
                    color: SeaGreen
                    show_icon: true
                    show_state: true
                    show_name: false
                    styles:
                      card:
                        - border-radius: 0
                      state:
                        - font-size: 40px
                        - font-weight: bold
                        - margin-left: '-10px'
                        - justify-self: start
                        - white-space: normal
                      icon:
                        - color: |
                            [[[
                              if (entity.state < 0) return 'Purple';
                              if (entity.state >= 0 && entity.state < 7) return 'rgb(255,64,56)';
                              if (entity.state >= 7 && entity.state < 16) return 'rgb(253,199,5)';
                              if (entity.state >= 16 && entity.state < 24) return 'rgb(45,209,96)';
                              if (entity.state >= 24 && entity.state < 30) return 'rgb(253,199,5)';
                              if (entity.state >= 30 && entity.state < 60) return 'rgb(255,64,56)';
                              else return 'Black';
                            ]]]             
                    card_mod:
                      style: |
                        ha-card {
                          border: none;
                        } 
                  - type: custom:button-card
                    entity: sensor.station_meteo_humidity
                    name: Humidité
                    layout: icon_state
                    color: SeaGreen
                    show_icon: true
                    show_state: true
                    show_name: false
                    styles:
                      card:
                        - border-radius: 0
                      name:
                        - font-size: 20px
                        - margin-left: '-50px'
                        - white-space: normal
                      state:
                        - font-size: 25px
                        - margin-left: '-40px'
                        - font-weight: bold
                        - white-space: normal
                      icon:
                        - left: 30px
                        - color: |
                            [[[
                              if (entity.state < 0) return 'Purple';
                              if (entity.state >= 0 && entity.state < 15) return 'rgb(255,64,56)';
                              if (entity.state >= 15 && entity.state < 30) return 'rgb(253,199,5)';
                              if (entity.state >= 30 && entity.state < 65) return 'rgb(45,209,96)';
                              if (entity.state >= 65 && entity.state < 75) return 'rgb(253,199,5)';
                              if (entity.state >= 75 && entity.state < 100) return 'rgb(255,64,56)';
                              else return 'Black';
                            ]]]            
                    card_mod:
                      style: |
                        ha-card {
                          border: none;
                        }   
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: sensor.station_meteo_co2
                layout: icon_name_state2nd
                name: CO2
                color: SeaGreen
                show_icon: true
                show_state: true
                styles:
                  card:
                    - border-radius: 0
                  name:
                    - font-size: 14px
                    - margin-left: '-10px'
                    - white-space: normal
                  state:
                    - font-size: 14px
                    - font-weight: bold
                  icon:
                    - left: 10px
                    - color: |
                        [[[
                          if (entity.state < 0) return 'Purple';
                          if (entity.state >= 0 && entity.state < 1000) return 'rgb(45,209,96)';
                          if (entity.state >= 1000 && entity.state < 2000) return 'rgb(253,199,5)';
                          if (entity.state >= 2000 && entity.state < 3000) return 'rgb(255,64,56)';
                          else return 'Black';
                        ]]]         
                card_mod:
                  style: |
                    ha-card {
                      border: none;
                    }     
              - type: custom:button-card
                entity: sensor.station_meteo_noise
                name: Sonomètre
                color: SeaGreen
                layout: icon_name_state2nd
                show_icon: true
                show_state: true
                styles:
                  card:
                    - border-radius: 0
                  name:
                    - font-size: 14px
                    - margin-left: '-10px'
                    - white-space: normal
                  state:
                    - font-size: 14px
                    - font-weight: bold
                    - white-space: normal
                  icon:
                    - left: 10px
                    - color: |
                        [[[
                          if (entity.state < 0) return 'Purple';
                          if (entity.state >= 0 && entity.state < 55) return 'rgb(45,209,96)';
                          if (entity.state >= 55 && entity.state < 65) return 'rgb(253,199,5)';
                          if (entity.state >= 65 && entity.state < 120) return 'rgb(255,64,56)';
                          else return 'Black';
                        ]]]          
                card_mod:
                  style: |
                    ha-card {
                      border: none;
                    }       
              - type: custom:button-card
                entity: sensor.station_meteo_pressure
                name: Pression
                color: SeaGreen
                layout: icon_name_state2nd
                show_icon: true
                show_state: true
                styles:
                  card:
                    - border-radius: 0
                  name:
                    - font-size: 14px
                    - margin-left: '-10px'
                    - white-space: normal
                  state:
                    - font-size: 14px
                    - font-weight: bold
                    - white-space: normal
                  icon:
                    - left: 10px
                    - color: rgb(45,209,96)
                card_mod:
                  style: |
                    ha-card {
                      border: none;
                    }
        card_mod:
          style: |
            ha-card {
              #background: Snow;
            }
      - type: custom:meteofrance-weather-card
        entity: weather.maison_familiale
        name: maison_familiale
        alertEntity: sensor.83_weather_alert
        detailEntity: sensor.maison_familiale_rain_chance
        cloudCoverEntity: sensor.maison_familiale_cloud_cover
        rainChanceEntity: sensor.maison_familiale_rain_chance
        freezeChanceEntity: sensor.maison_familiale_freeze_chance
        snowChanceEntity: sensor.maison_familiale_snow_chance
        uvEntity: sensor.maison_familiale_uv
        hourly_forecast: false
        one_hour_forecast: false
        daily_forecast: true
        wind_forecast_icons: false
        details: false
        alert_forecast: false
        humidity_forecast: false
        animated_icons: true
        current: true
  - type: sections
    title: paradis
    path: paradis
    icon: mdi:sunglasses
    sections:
      - type: grid
        cards:
          - type: custom:vertical-stack-in-card
            style: |
              ha-card { 
                border-radius: 20px !important;
                border-color: rgba(12, 12, 14, 0.2);
                border-style: outset;
                border-width: 1px;
              }
            cards:
              - type: custom:decluttering-card
                template: header_temperature_graph_2
              - type: custom:decluttering-card
                template: header_main_2
              - type: custom:meteofrance-weather-card
                entity: weather.maison_familiale
                number_of_forecasts: '5'
                hourly_forecast: false
                one_hour_forecast: false
                daily_forecast: true
                wind_forecast_icons: false
                details: false
                alert_forecast: false
                humidity_forecast: false
                animated_icons: true
                current: false
      - type: grid
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                entities:
                  - sensor.maison_familiale_lumi_lumi_weather_temperature
                name: Température
                line_color: '#e74c3c'
                line_width: 8
                font_size: 75
              - type: custom:mini-graph-card
                entities:
                  - sensor.maison_familiale_lumi_lumi_weather_humidity
                name: Humidité
                line_color: blue
                line_width: 8
                font_size: 75
          - type: custom:mushroom-entity-card
            entity: binary_sensor.maison_familiale_ouvrants
            name: Ouvertures
          - type: custom:mushroom-climate-card
            entity: climate.salon
        title: Pièce de vie
      - type: grid
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                entities:
                  - sensor.maison_familiale_lumi_lumi_weather_temperature_2
                name: Parents
                line_color: '#e74c3c'
                line_width: 8
                font_size: 75
              - type: custom:mini-graph-card
                entities:
                  - sensor.maison_familiale_lumi_lumi_weather_temperature_4
                name: Enfants
                line_color: blue
                line_width: 8
                font_size: 75
          - type: custom:mushroom-climate-card
            entity: climate.chambre_enfants
        title: Chambres
      - type: grid
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                entities:
                  - sensor.maison_familiale_lumi_lumi_weather_temperature_3
                name: Température
                line_color: '#e74c3c'
                line_width: 8
                font_size: 75
              - type: custom:mini-graph-card
                entities:
                  - sensor.maison_familiale_lumi_lumi_weather_humidity_3
                name: Humidité
                line_color: blue
                line_width: 8
                font_size: 75
        title: Salle de bain
      - type: grid
        cards: []
